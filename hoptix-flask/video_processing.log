2025-08-23 18:40:37,256 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 18:40:37,257 - INFO - === Starting video processing worker ===
2025-08-23 18:40:37,257 - INFO - Initializing database and S3 connections...
2025-08-23 18:40:37,275 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 18:40:37,347 - INFO - Successfully connected to database and S3
2025-08-23 18:40:37,347 - INFO - Fetching next uploaded video...
2025-08-23 18:40:37,675 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 18:40:37,677 - INFO - No uploaded videos found in queue
2025-08-23 18:40:37,677 - INFO - === Worker session completed in 0.42 seconds ===
2025-08-23 18:44:50,581 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 18:44:50,581 - INFO - === Starting video processing worker ===
2025-08-23 18:44:50,581 - INFO - Initializing database and S3 connections...
2025-08-23 18:44:50,600 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 18:44:50,667 - INFO - Successfully connected to database and S3
2025-08-23 18:44:50,667 - INFO - Fetching next uploaded video...
2025-08-23 18:44:50,934 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 18:44:50,937 - INFO - Found video to process - ID: 3c68a69a-9c04-47d6-9518-e6e1077fdb72, S3 Key: dev/sample/sample.mp4
2025-08-23 18:44:50,937 - INFO - Attempting to claim video 3c68a69a-9c04-47d6-9518-e6e1077fdb72...
2025-08-23 18:44:51,067 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.3c68a69a-9c04-47d6-9518-e6e1077fdb72&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 18:44:51,068 - INFO - Successfully claimed video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:44:51,068 - INFO - Starting video processing for 3c68a69a-9c04-47d6-9518-e6e1077fdb72...
2025-08-23 18:44:51,068 - INFO - Starting video processing pipeline for 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:44:51,070 - INFO - Downloading video 3c68a69a-9c04-47d6-9518-e6e1077fdb72 from S3: dev/sample/sample.mp4
2025-08-23 18:44:53,272 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_utuu9ldt/input.mp4
2025-08-23 18:44:53,272 - INFO - Starting transcription for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:45:05,273 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 401 Unauthorized"
2025-08-23 18:45:05,278 - INFO - Transcription completed: 1 segments generated
2025-08-23 18:45:05,278 - INFO - Starting transaction splitting for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:45:05,278 - INFO - Transaction splitting completed: 0 transactions identified
2025-08-23 18:45:05,278 - INFO - Uploading artifacts to S3 with prefix: deriv/session=3c68a69a-9c04-47d6-9518-e6e1077fdb72/
2025-08-23 18:45:05,534 - INFO - Artifacts uploaded to S3
2025-08-23 18:45:05,535 - INFO - Inserting 0 transactions into database
2025-08-23 18:45:05,732 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns= "HTTP/2 400 Bad Request"
2025-08-23 18:45:05,733 - ERROR - Error inserting transactions: {'code': 'PGRST100', 'details': 'unexpected end of input expecting field name (* or [a..z0..9_$])', 'hint': None, 'message': '"failed to parse columns parameter ()" (line 1, column 1)'}
2025-08-23 18:45:05,733 - ERROR - Transaction data sample: No rows
2025-08-23 18:45:05,735 - INFO - Cleaned up temporary files for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:45:05,735 - ERROR - ❌ Error processing video 3c68a69a-9c04-47d6-9518-e6e1077fdb72 after 14.67 seconds: {'code': 'PGRST100', 'details': 'unexpected end of input expecting field name (* or [a..z0..9_$])', 'hint': None, 'message': '"failed to parse columns parameter ()" (line 1, column 1)'}
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 70, in main
    process_one_video(db, s3, row)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 157, in process_one_video
    tx_ids = insert_transactions(db, video_row, txs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 44, in insert_transactions
    ins = db.client.table("transactions").insert(rows).execute()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/postgrest/_sync/request_builder.py", line 78, in execute
    raise APIError(r.json())
postgrest.exceptions.APIError: {'code': 'PGRST100', 'details': 'unexpected end of input expecting field name (* or [a..z0..9_$])', 'hint': None, 'message': '"failed to parse columns parameter ()" (line 1, column 1)'}
2025-08-23 18:45:05,866 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.3c68a69a-9c04-47d6-9518-e6e1077fdb72 "HTTP/2 200 OK"
2025-08-23 18:45:05,870 - INFO - Marked video 3c68a69a-9c04-47d6-9518-e6e1077fdb72 as failed in database
2025-08-23 18:45:05,870 - ERROR - Fatal error in main(): {'code': 'PGRST100', 'details': 'unexpected end of input expecting field name (* or [a..z0..9_$])', 'hint': None, 'message': '"failed to parse columns parameter ()" (line 1, column 1)'}
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 70, in main
    process_one_video(db, s3, row)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 157, in process_one_video
    tx_ids = insert_transactions(db, video_row, txs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 44, in insert_transactions
    ins = db.client.table("transactions").insert(rows).execute()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/postgrest/_sync/request_builder.py", line 78, in execute
    raise APIError(r.json())
postgrest.exceptions.APIError: {'code': 'PGRST100', 'details': 'unexpected end of input expecting field name (* or [a..z0..9_$])', 'hint': None, 'message': '"failed to parse columns parameter ()" (line 1, column 1)'}
2025-08-23 18:45:05,870 - INFO - === Worker session completed in 15.29 seconds ===
2025-08-23 18:45:59,006 - INFO - OpenAI API key found
2025-08-23 18:45:59,007 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 18:45:59,007 - INFO - === Starting video processing worker ===
2025-08-23 18:45:59,007 - INFO - Initializing database and S3 connections...
2025-08-23 18:45:59,023 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 18:45:59,074 - INFO - Successfully connected to database and S3
2025-08-23 18:45:59,074 - INFO - Fetching next uploaded video...
2025-08-23 18:45:59,397 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 18:45:59,402 - INFO - Found video to process - ID: 3c68a69a-9c04-47d6-9518-e6e1077fdb72, S3 Key: dev/sample/sample.mp4
2025-08-23 18:45:59,402 - INFO - Attempting to claim video 3c68a69a-9c04-47d6-9518-e6e1077fdb72...
2025-08-23 18:45:59,517 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.3c68a69a-9c04-47d6-9518-e6e1077fdb72&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 18:45:59,518 - INFO - Successfully claimed video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:45:59,518 - INFO - Starting video processing for 3c68a69a-9c04-47d6-9518-e6e1077fdb72...
2025-08-23 18:45:59,518 - INFO - Starting video processing pipeline for 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:45:59,521 - INFO - Downloading video 3c68a69a-9c04-47d6-9518-e6e1077fdb72 from S3: dev/sample/sample.mp4
2025-08-23 18:46:02,117 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_1eg1l8t1/input.mp4
2025-08-23 18:46:02,117 - INFO - Starting transcription for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:46:06,474 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 401 Unauthorized"
2025-08-23 18:46:06,484 - INFO - Transcription completed: 1 segments generated
2025-08-23 18:46:06,485 - INFO - Starting transaction splitting for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:46:06,485 - INFO - Transaction splitting completed: 0 transactions identified
2025-08-23 18:46:06,485 - INFO - Uploading artifacts to S3 with prefix: deriv/session=3c68a69a-9c04-47d6-9518-e6e1077fdb72/
2025-08-23 18:46:06,770 - INFO - Artifacts uploaded to S3
2025-08-23 18:46:06,770 - INFO - Inserting 0 transactions into database
2025-08-23 18:46:06,771 - WARNING - No transactions to insert - empty list provided
2025-08-23 18:46:06,771 - INFO - Inserted transactions with IDs: []
2025-08-23 18:46:06,771 - INFO - Starting grading for 0 transactions
2025-08-23 18:46:06,821 - INFO - Grading completed and uploaded to S3
2025-08-23 18:46:06,821 - INFO - Upserting grades for 0 transactions
2025-08-23 18:46:06,822 - WARNING - No grades to upsert - empty transaction IDs or grades list
2025-08-23 18:46:06,822 - INFO - Successfully completed all processing steps for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:46:06,824 - INFO - Cleaned up temporary files for video 3c68a69a-9c04-47d6-9518-e6e1077fdb72
2025-08-23 18:46:07,022 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.3c68a69a-9c04-47d6-9518-e6e1077fdb72 "HTTP/2 200 OK"
2025-08-23 18:46:07,026 - INFO - ✅ Successfully processed video 3c68a69a-9c04-47d6-9518-e6e1077fdb72 in 7.31 seconds
2025-08-23 18:46:07,027 - INFO - === Worker session completed in 8.02 seconds ===
2025-08-23 19:18:26,313 - INFO - OpenAI API key found
2025-08-23 19:18:26,313 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:18:26,313 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:18:26,313 - INFO - Initializing database and S3 connections...
2025-08-23 19:18:26,331 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:18:26,395 - INFO - Successfully connected to database and S3
2025-08-23 19:18:26,575 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:18:26,578 - INFO - No more uploaded videos found in queue.
2025-08-23 19:18:26,578 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-23 19:18:26,578 - INFO - === Batch session completed in 0.27 seconds ===
2025-08-23 19:20:54,678 - INFO - OpenAI API key found
2025-08-23 19:20:54,678 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:20:54,678 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:20:54,678 - INFO - Initializing database and S3 connections...
2025-08-23 19:20:54,696 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:20:54,764 - INFO - Successfully connected to database and S3
2025-08-23 19:20:55,123 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:20:55,130 - INFO - Found video to process - ID: 78130140-2459-4cb3-8f22-bb05b244a325, S3 Key: dev/sample/sample4.mp4
2025-08-23 19:20:55,130 - INFO - Attempting to claim video 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:20:55,224 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.78130140-2459-4cb3-8f22-bb05b244a325&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:20:55,224 - INFO - Successfully claimed video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:20:55,224 - INFO - Starting video processing for 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:20:55,224 - INFO - Starting video processing pipeline for 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:20:55,226 - INFO - Downloading video 78130140-2459-4cb3-8f22-bb05b244a325 from S3: dev/sample/sample4.mp4
2025-08-23 19:20:56,457 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_y6mpdfd2/input.mp4
2025-08-23 19:20:56,457 - INFO - Starting transcription for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:21:03,775 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:21:03,781 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:21:03,781 - INFO - Starting transaction splitting for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:21:11,839 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:21:11,908 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:21:11,908 - INFO - Uploading artifacts to S3 with prefix: deriv/session=78130140-2459-4cb3-8f22-bb05b244a325/
2025-08-23 19:21:12,244 - INFO - Artifacts uploaded to S3
2025-08-23 19:21:12,245 - INFO - Inserting 1 transactions into database
2025-08-23 19:21:12,404 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22kind%22%2C%22meta%22%2C%22run_id%22%2C%22ended_at%22%2C%22video_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-23 19:21:12,412 - INFO - Inserted transactions with IDs: ['25a9213e-cfa8-4a1b-bcf5-efa57b20ba75']
2025-08-23 19:21:12,413 - INFO - Starting grading for 1 transactions
2025-08-23 19:21:55,371 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:21:55,587 - INFO - Grading completed and uploaded to S3
2025-08-23 19:21:55,587 - INFO - Upserting grades for 1 transactions
2025-08-23 19:21:56,135 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_after%22%2C%22items_upsellable%22%2C%22details%22%2C%22upsell_possible%22%2C%22reasoning_summary%22%2C%22num_addon_opportunities%22%2C%22num_upsell_opportunities%22%2C%22num_largest_offers%22%2C%22upsize_offered%22%2C%22items_addonable%22%2C%22items_addon_success%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22coupon_used%22%2C%22complete_order%22%2C%22video_link%22%2C%22items_upsold%22%2C%22num_items_initial%22%2C%22items_upsizeable%22%2C%22out_of_stock_items%22%2C%22score%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_upsize_success%22%2C%22upsell_offered%22%2C%22num_items_after%22%2C%22items_upsize_success%22%2C%22num_upsize_offers%22%2C%22num_addon_offers%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22issues%22%2C%22gpt_price%22%2C%22transaction_id%22%2C%22feedback%22%2C%22num_upsell_success%22 "HTTP/2 201 Created"
2025-08-23 19:21:56,136 - INFO - Successfully completed all processing steps for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:21:56,138 - INFO - Cleaned up temporary files for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:21:56,281 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.78130140-2459-4cb3-8f22-bb05b244a325 "HTTP/2 200 OK"
2025-08-23 19:21:56,282 - INFO - ✅ Successfully processed video 78130140-2459-4cb3-8f22-bb05b244a325 in 60.91 seconds
2025-08-23 19:21:56,420 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:21:56,421 - INFO - Found video to process - ID: a2ba5b09-5ed4-406c-93e9-85a94c1f1a45, S3 Key: dev/sample/sample1.mp4
2025-08-23 19:21:56,421 - INFO - Attempting to claim video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:21:56,635 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:21:56,639 - INFO - Successfully claimed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:21:56,639 - INFO - Starting video processing for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:21:56,639 - INFO - Starting video processing pipeline for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:21:56,640 - INFO - Downloading video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 from S3: dev/sample/sample1.mp4
2025-08-23 19:21:57,682 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_o07tz0xg/input.mp4
2025-08-23 19:21:57,682 - INFO - Starting transcription for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:22:03,455 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:22:03,459 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:22:03,459 - INFO - Starting transaction splitting for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:22:13,521 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:22:13,526 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:22:13,526 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a2ba5b09-5ed4-406c-93e9-85a94c1f1a45/
2025-08-23 19:22:13,744 - INFO - Artifacts uploaded to S3
2025-08-23 19:22:13,744 - INFO - Inserting 1 transactions into database
2025-08-23 19:22:13,924 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22kind%22%2C%22meta%22%2C%22run_id%22%2C%22ended_at%22%2C%22video_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-23 19:22:13,931 - INFO - Inserted transactions with IDs: ['8a64a92c-dd58-4f5d-82c9-cdc2572f1210']
2025-08-23 19:22:13,931 - INFO - Starting grading for 1 transactions
2025-08-23 19:23:21,494 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:23:21,775 - INFO - Grading completed and uploaded to S3
2025-08-23 19:23:21,776 - INFO - Upserting grades for 1 transactions
2025-08-23 19:23:22,109 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_after%22%2C%22items_upsellable%22%2C%22details%22%2C%22upsell_possible%22%2C%22reasoning_summary%22%2C%22num_addon_opportunities%22%2C%22num_upsell_opportunities%22%2C%22num_largest_offers%22%2C%22upsize_offered%22%2C%22items_addonable%22%2C%22items_addon_success%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22coupon_used%22%2C%22complete_order%22%2C%22video_link%22%2C%22items_upsold%22%2C%22num_items_initial%22%2C%22items_upsizeable%22%2C%22out_of_stock_items%22%2C%22score%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_upsize_success%22%2C%22upsell_offered%22%2C%22num_items_after%22%2C%22items_upsize_success%22%2C%22num_upsize_offers%22%2C%22num_addon_offers%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22issues%22%2C%22gpt_price%22%2C%22transaction_id%22%2C%22feedback%22%2C%22num_upsell_success%22 "HTTP/2 201 Created"
2025-08-23 19:23:22,112 - INFO - Successfully completed all processing steps for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:23:22,116 - INFO - Cleaned up temporary files for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:23:22,213 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 "HTTP/2 200 OK"
2025-08-23 19:23:22,215 - INFO - ✅ Successfully processed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 in 85.48 seconds
2025-08-23 19:23:22,300 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:23:22,301 - INFO - Found video to process - ID: a8a3a805-7cec-4902-ad50-74e65a0c7880, S3 Key: dev/sample/sample2.mp4
2025-08-23 19:23:22,301 - INFO - Attempting to claim video a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:23:22,398 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:23:22,399 - INFO - Successfully claimed video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:23:22,399 - INFO - Starting video processing for a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:23:22,399 - INFO - Starting video processing pipeline for a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:23:22,400 - INFO - Downloading video a8a3a805-7cec-4902-ad50-74e65a0c7880 from S3: dev/sample/sample2.mp4
2025-08-23 19:23:23,312 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_f_vfnuex/input.mp4
2025-08-23 19:23:23,313 - INFO - Starting transcription for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:23:27,939 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:23:27,945 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:23:27,946 - INFO - Starting transaction splitting for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:23:38,826 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:23:38,831 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:23:38,831 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a8a3a805-7cec-4902-ad50-74e65a0c7880/
2025-08-23 19:23:39,038 - INFO - Artifacts uploaded to S3
2025-08-23 19:23:39,039 - INFO - Inserting 1 transactions into database
2025-08-23 19:23:39,207 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22kind%22%2C%22meta%22%2C%22run_id%22%2C%22ended_at%22%2C%22video_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-23 19:23:39,210 - INFO - Inserted transactions with IDs: ['05277d3c-04ce-4007-9a32-d95a0ccb582d']
2025-08-23 19:23:39,210 - INFO - Starting grading for 1 transactions
2025-08-23 19:25:24,546 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:25:24,841 - INFO - Grading completed and uploaded to S3
2025-08-23 19:25:24,841 - INFO - Upserting grades for 1 transactions
2025-08-23 19:25:25,144 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_after%22%2C%22items_upsellable%22%2C%22details%22%2C%22upsell_possible%22%2C%22reasoning_summary%22%2C%22num_addon_opportunities%22%2C%22num_upsell_opportunities%22%2C%22num_largest_offers%22%2C%22upsize_offered%22%2C%22items_addonable%22%2C%22items_addon_success%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22coupon_used%22%2C%22complete_order%22%2C%22video_link%22%2C%22items_upsold%22%2C%22num_items_initial%22%2C%22items_upsizeable%22%2C%22out_of_stock_items%22%2C%22score%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_upsize_success%22%2C%22upsell_offered%22%2C%22num_items_after%22%2C%22items_upsize_success%22%2C%22num_upsize_offers%22%2C%22num_addon_offers%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22issues%22%2C%22gpt_price%22%2C%22transaction_id%22%2C%22feedback%22%2C%22num_upsell_success%22 "HTTP/2 201 Created"
2025-08-23 19:25:25,145 - INFO - Successfully completed all processing steps for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:25:25,148 - INFO - Cleaned up temporary files for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:25:25,227 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880 "HTTP/2 200 OK"
2025-08-23 19:25:25,228 - INFO - ✅ Successfully processed video a8a3a805-7cec-4902-ad50-74e65a0c7880 in 122.75 seconds
2025-08-23 19:25:25,732 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:25:25,733 - INFO - Found video to process - ID: e497bb2f-00c5-418a-b7c3-4d221dc89374, S3 Key: dev/sample/sample.mp4
2025-08-23 19:25:25,733 - INFO - Attempting to claim video e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:25:25,801 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.e497bb2f-00c5-418a-b7c3-4d221dc89374&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:25:25,802 - INFO - Successfully claimed video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:25:25,802 - INFO - Starting video processing for e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:25:25,802 - INFO - Starting video processing pipeline for e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:25:25,802 - INFO - Downloading video e497bb2f-00c5-418a-b7c3-4d221dc89374 from S3: dev/sample/sample.mp4
2025-08-23 19:25:27,780 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_29z3fl7n/input.mp4
2025-08-23 19:25:27,780 - INFO - Starting transcription for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:25:36,014 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:25:36,019 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:25:36,019 - INFO - Starting transaction splitting for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:25:51,801 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:25:51,803 - INFO - Transaction splitting completed: 2 transactions identified
2025-08-23 19:25:51,803 - INFO - Uploading artifacts to S3 with prefix: deriv/session=e497bb2f-00c5-418a-b7c3-4d221dc89374/
2025-08-23 19:25:51,985 - INFO - Artifacts uploaded to S3
2025-08-23 19:25:51,985 - INFO - Inserting 2 transactions into database
2025-08-23 19:25:52,141 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22kind%22%2C%22meta%22%2C%22run_id%22%2C%22ended_at%22%2C%22video_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-23 19:25:52,143 - INFO - Inserted transactions with IDs: ['69cfb357-cb7b-45b9-ba6f-05cb52d5f4f8', 'db87bbfc-9ffc-4a22-aca0-c1f7c5af166a']
2025-08-23 19:25:52,143 - INFO - Starting grading for 2 transactions
2025-08-23 19:26:53,563 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:27:27,287 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:27:27,718 - INFO - Grading completed and uploaded to S3
2025-08-23 19:27:27,718 - INFO - Upserting grades for 2 transactions
2025-08-23 19:27:27,966 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_after%22%2C%22items_upsellable%22%2C%22details%22%2C%22upsell_possible%22%2C%22reasoning_summary%22%2C%22num_addon_opportunities%22%2C%22num_upsell_opportunities%22%2C%22num_largest_offers%22%2C%22upsize_offered%22%2C%22items_addonable%22%2C%22items_addon_success%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22coupon_used%22%2C%22complete_order%22%2C%22video_link%22%2C%22items_upsold%22%2C%22num_items_initial%22%2C%22items_upsizeable%22%2C%22out_of_stock_items%22%2C%22score%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_upsize_success%22%2C%22upsell_offered%22%2C%22num_items_after%22%2C%22items_upsize_success%22%2C%22num_upsize_offers%22%2C%22num_addon_offers%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22issues%22%2C%22gpt_price%22%2C%22transaction_id%22%2C%22feedback%22%2C%22num_upsell_success%22 "HTTP/2 201 Created"
2025-08-23 19:27:27,968 - INFO - Successfully completed all processing steps for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:27:27,970 - INFO - Cleaned up temporary files for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:27:28,061 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.e497bb2f-00c5-418a-b7c3-4d221dc89374 "HTTP/2 200 OK"
2025-08-23 19:27:28,062 - INFO - ✅ Successfully processed video e497bb2f-00c5-418a-b7c3-4d221dc89374 in 122.17 seconds
2025-08-23 19:27:28,139 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:27:28,140 - INFO - Found video to process - ID: f8d0bcca-97e9-4f9b-97e7-b227b78b91f1, S3 Key: dev/sample/sample3.mp4
2025-08-23 19:27:28,141 - INFO - Attempting to claim video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1...
2025-08-23 19:27:28,267 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f8d0bcca-97e9-4f9b-97e7-b227b78b91f1&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:27:28,274 - INFO - Successfully claimed video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:27:28,274 - INFO - Starting video processing for f8d0bcca-97e9-4f9b-97e7-b227b78b91f1...
2025-08-23 19:27:28,274 - INFO - Starting video processing pipeline for f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:27:28,275 - INFO - Downloading video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 from S3: dev/sample/sample3.mp4
2025-08-23 19:27:29,845 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_z2xr2vr3/input.mp4
2025-08-23 19:27:29,845 - INFO - Starting transcription for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:27:36,776 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:27:36,779 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:27:36,779 - INFO - Starting transaction splitting for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:27:49,117 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:27:49,121 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:27:49,121 - INFO - Uploading artifacts to S3 with prefix: deriv/session=f8d0bcca-97e9-4f9b-97e7-b227b78b91f1/
2025-08-23 19:27:49,334 - INFO - Artifacts uploaded to S3
2025-08-23 19:27:49,335 - INFO - Inserting 1 transactions into database
2025-08-23 19:27:49,494 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22kind%22%2C%22meta%22%2C%22run_id%22%2C%22ended_at%22%2C%22video_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-23 19:27:49,499 - INFO - Inserted transactions with IDs: ['3e63d250-bd80-4b3d-a82c-a7c31bd92658']
2025-08-23 19:27:49,499 - INFO - Starting grading for 1 transactions
2025-08-23 19:28:33,791 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:28:34,073 - INFO - Grading completed and uploaded to S3
2025-08-23 19:28:34,073 - INFO - Upserting grades for 1 transactions
2025-08-23 19:28:34,248 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_after%22%2C%22items_upsellable%22%2C%22details%22%2C%22upsell_possible%22%2C%22reasoning_summary%22%2C%22num_addon_opportunities%22%2C%22num_upsell_opportunities%22%2C%22num_largest_offers%22%2C%22upsize_offered%22%2C%22items_addonable%22%2C%22items_addon_success%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22coupon_used%22%2C%22complete_order%22%2C%22video_link%22%2C%22items_upsold%22%2C%22num_items_initial%22%2C%22items_upsizeable%22%2C%22out_of_stock_items%22%2C%22score%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_upsize_success%22%2C%22upsell_offered%22%2C%22num_items_after%22%2C%22items_upsize_success%22%2C%22num_upsize_offers%22%2C%22num_addon_offers%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22issues%22%2C%22gpt_price%22%2C%22transaction_id%22%2C%22feedback%22%2C%22num_upsell_success%22 "HTTP/2 201 Created"
2025-08-23 19:28:34,249 - INFO - Successfully completed all processing steps for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:28:34,251 - INFO - Cleaned up temporary files for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:28:34,337 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 "HTTP/2 200 OK"
2025-08-23 19:28:34,339 - INFO - ✅ Successfully processed video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 in 65.98 seconds
2025-08-23 19:28:34,464 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:28:34,466 - INFO - No more uploaded videos found in queue.
2025-08-23 19:28:34,466 - INFO - Batch complete. Succeeded: 5, Failed: 0, Total: 5
2025-08-23 19:28:34,466 - INFO - Processed video IDs: 78130140-2459-4cb3-8f22-bb05b244a325, a2ba5b09-5ed4-406c-93e9-85a94c1f1a45, a8a3a805-7cec-4902-ad50-74e65a0c7880, e497bb2f-00c5-418a-b7c3-4d221dc89374, f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:28:34,466 - INFO - === Batch session completed in 459.79 seconds ===
2025-08-23 19:34:43,668 - INFO - OpenAI API key found
2025-08-23 19:34:43,668 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:34:43,668 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:34:43,668 - INFO - Initializing database and S3 connections...
2025-08-23 19:34:43,687 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:34:43,754 - INFO - Successfully connected to database and S3
2025-08-23 19:34:43,915 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:34:43,919 - INFO - No more uploaded videos found in queue.
2025-08-23 19:34:43,919 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-23 19:34:43,919 - INFO - === Batch session completed in 0.25 seconds ===
2025-08-23 19:35:09,282 - INFO - OpenAI API key found
2025-08-23 19:35:09,282 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:35:09,282 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:35:09,283 - INFO - Initializing database and S3 connections...
2025-08-23 19:35:09,303 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:35:09,362 - INFO - Successfully connected to database and S3
2025-08-23 19:35:09,507 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:35:09,510 - INFO - Found video to process - ID: 78130140-2459-4cb3-8f22-bb05b244a325, S3 Key: dev/sample/sample4.mp4
2025-08-23 19:35:09,511 - INFO - Attempting to claim video 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:35:09,593 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.78130140-2459-4cb3-8f22-bb05b244a325&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:35:09,594 - INFO - Successfully claimed video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:35:09,594 - INFO - Starting video processing for 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:35:09,594 - INFO - Starting video processing pipeline for 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:35:09,595 - INFO - Downloading video 78130140-2459-4cb3-8f22-bb05b244a325 from S3: dev/sample/sample4.mp4
2025-08-23 19:35:10,747 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_oa_sjmac/input.mp4
2025-08-23 19:35:10,747 - INFO - Starting transcription for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:35:14,749 - INFO - Cleaned up temporary files for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:35:14,749 - INFO - === Batch session completed in 5.47 seconds ===
2025-08-23 19:37:20,702 - INFO - OpenAI API key found
2025-08-23 19:37:20,702 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:37:20,702 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:37:20,702 - INFO - Initializing database and S3 connections...
2025-08-23 19:37:20,721 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:37:20,775 - INFO - Successfully connected to database and S3
2025-08-23 19:37:21,046 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:37:21,053 - INFO - Found video to process - ID: a2ba5b09-5ed4-406c-93e9-85a94c1f1a45, S3 Key: dev/sample/sample1.mp4
2025-08-23 19:37:21,053 - INFO - Attempting to claim video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:37:21,140 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:37:21,141 - INFO - Successfully claimed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:37:21,141 - INFO - Starting video processing for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:37:21,141 - INFO - Starting video processing pipeline for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:37:21,142 - INFO - Downloading video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 from S3: dev/sample/sample1.mp4
2025-08-23 19:37:22,209 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_3hj22xa6/input.mp4
2025-08-23 19:37:22,209 - INFO - Starting transcription for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:37:27,788 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:37:27,792 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:37:27,792 - INFO - Starting transaction splitting for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:37:34,266 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:37:34,314 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:37:34,314 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a2ba5b09-5ed4-406c-93e9-85a94c1f1a45/
2025-08-23 19:37:34,664 - INFO - Artifacts uploaded to S3
2025-08-23 19:37:34,664 - INFO - Inserting 1 transactions into database
2025-08-23 19:37:34,802 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22run_id%22%2C%22kind%22%2C%22meta%22%2C%22video_id%22%2C%22started_at%22%2C%22tx_range%22%2C%22ended_at%22 "HTTP/2 201 Created"
2025-08-23 19:37:34,807 - INFO - Inserted transactions with IDs: ['2a6f25bd-599d-4dc9-87e0-572396e52819']
2025-08-23 19:37:34,807 - INFO - Starting grading for 1 transactions
2025-08-23 19:38:53,632 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:38:53,860 - INFO - Grading completed and uploaded to S3
2025-08-23 19:38:53,860 - INFO - Upserting grades for 1 transactions
2025-08-23 19:38:54,051 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsizeable%22%2C%22items_upsold%22%2C%22out_of_stock_items%22%2C%22coupon_used%22%2C%22items_addonable%22%2C%22score%22%2C%22items_upsize_success%22%2C%22transaction_id%22%2C%22upsell_possible%22%2C%22num_addon_opportunities%22%2C%22items_upsellable%22%2C%22num_items_after%22%2C%22num_addon_offers%22%2C%22num_upsell_opportunities%22%2C%22feedback%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22video_link%22%2C%22num_upsize_opportunities%22%2C%22issues%22%2C%22num_upsize_success%22%2C%22items_addon_success%22%2C%22complete_order%22%2C%22gpt_price%22%2C%22num_largest_offers%22%2C%22details%22%2C%22num_upsize_offers%22%2C%22items_after%22%2C%22upsize_possible%22%2C%22upsell_offered%22%2C%22mobile_order%22%2C%22reasoning_summary%22%2C%22num_items_initial%22%2C%22num_upsell_success%22%2C%22items_initial%22%2C%22upsize_offered%22%2C%22num_upsell_offers%22%2C%22asked_more_time%22 "HTTP/2 201 Created"
2025-08-23 19:38:54,052 - INFO - Successfully completed all processing steps for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:38:54,053 - INFO - Cleaned up temporary files for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:38:54,159 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 "HTTP/2 200 OK"
2025-08-23 19:38:54,160 - INFO - ✅ Successfully processed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 in 92.91 seconds
2025-08-23 19:38:54,239 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:38:54,240 - INFO - Found video to process - ID: a8a3a805-7cec-4902-ad50-74e65a0c7880, S3 Key: dev/sample/sample2.mp4
2025-08-23 19:38:54,240 - INFO - Attempting to claim video a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:38:54,332 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:38:54,333 - INFO - Successfully claimed video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:38:54,334 - INFO - Starting video processing for a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:38:54,334 - INFO - Starting video processing pipeline for a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:38:54,334 - INFO - Downloading video a8a3a805-7cec-4902-ad50-74e65a0c7880 from S3: dev/sample/sample2.mp4
2025-08-23 19:38:55,187 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_p0u3soj1/input.mp4
2025-08-23 19:38:55,187 - INFO - Starting transcription for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:39:00,291 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:39:00,293 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:39:00,294 - INFO - Starting transaction splitting for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:39:16,340 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:39:16,344 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:39:16,344 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a8a3a805-7cec-4902-ad50-74e65a0c7880/
2025-08-23 19:39:16,531 - INFO - Artifacts uploaded to S3
2025-08-23 19:39:16,531 - INFO - Inserting 1 transactions into database
2025-08-23 19:39:16,740 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22run_id%22%2C%22kind%22%2C%22meta%22%2C%22video_id%22%2C%22started_at%22%2C%22tx_range%22%2C%22ended_at%22 "HTTP/2 201 Created"
2025-08-23 19:39:16,741 - INFO - Inserted transactions with IDs: ['1e8d2717-cfe0-4f9f-95b9-daf3bb19deb0']
2025-08-23 19:39:16,741 - INFO - Starting grading for 1 transactions
2025-08-23 19:40:44,781 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:40:47,203 - INFO - Grading completed and uploaded to S3
2025-08-23 19:40:47,203 - INFO - Upserting grades for 1 transactions
2025-08-23 19:40:48,625 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsizeable%22%2C%22items_upsold%22%2C%22out_of_stock_items%22%2C%22coupon_used%22%2C%22items_addonable%22%2C%22score%22%2C%22items_upsize_success%22%2C%22transaction_id%22%2C%22upsell_possible%22%2C%22num_addon_opportunities%22%2C%22items_upsellable%22%2C%22num_items_after%22%2C%22num_addon_offers%22%2C%22num_upsell_opportunities%22%2C%22feedback%22%2C%22num_addon_success%22%2C%22video_file_path%22%2C%22video_link%22%2C%22num_upsize_opportunities%22%2C%22issues%22%2C%22num_upsize_success%22%2C%22items_addon_success%22%2C%22complete_order%22%2C%22gpt_price%22%2C%22num_largest_offers%22%2C%22details%22%2C%22num_upsize_offers%22%2C%22items_after%22%2C%22upsize_possible%22%2C%22upsell_offered%22%2C%22mobile_order%22%2C%22reasoning_summary%22%2C%22num_items_initial%22%2C%22num_upsell_success%22%2C%22items_initial%22%2C%22upsize_offered%22%2C%22num_upsell_offers%22%2C%22asked_more_time%22 "HTTP/2 201 Created"
2025-08-23 19:40:48,628 - INFO - Successfully completed all processing steps for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:40:48,629 - INFO - Cleaned up temporary files for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:40:48,724 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880 "HTTP/2 200 OK"
2025-08-23 19:40:48,725 - INFO - ✅ Successfully processed video a8a3a805-7cec-4902-ad50-74e65a0c7880 in 114.30 seconds
2025-08-23 19:40:48,848 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:40:48,848 - INFO - Found video to process - ID: e497bb2f-00c5-418a-b7c3-4d221dc89374, S3 Key: dev/sample/sample.mp4
2025-08-23 19:40:48,849 - INFO - Attempting to claim video e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:40:48,959 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.e497bb2f-00c5-418a-b7c3-4d221dc89374&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:40:48,960 - INFO - Successfully claimed video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:40:48,960 - INFO - Starting video processing for e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:40:48,960 - INFO - Starting video processing pipeline for e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:40:48,960 - INFO - Downloading video e497bb2f-00c5-418a-b7c3-4d221dc89374 from S3: dev/sample/sample.mp4
2025-08-23 19:40:54,573 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_tcesmkmo/input.mp4
2025-08-23 19:40:54,574 - INFO - Starting transcription for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:41:03,870 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:41:03,873 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:41:03,873 - INFO - Starting transaction splitting for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:41:12,869 - INFO - Cleaned up temporary files for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:41:12,870 - INFO - === Batch session completed in 232.17 seconds ===
2025-08-23 19:45:52,439 - INFO - OpenAI API key found
2025-08-23 19:45:52,440 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:45:52,440 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:45:52,440 - INFO - Initializing database and S3 connections...
2025-08-23 19:45:52,459 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:45:52,533 - INFO - Successfully connected to database and S3
2025-08-23 19:45:52,839 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:45:52,846 - INFO - Found video to process - ID: f8d0bcca-97e9-4f9b-97e7-b227b78b91f1, S3 Key: dev/sample/sample3.mp4
2025-08-23 19:45:52,846 - INFO - Attempting to claim video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1...
2025-08-23 19:45:52,948 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f8d0bcca-97e9-4f9b-97e7-b227b78b91f1&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:45:52,948 - INFO - Successfully claimed video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:45:52,948 - INFO - Starting video processing for f8d0bcca-97e9-4f9b-97e7-b227b78b91f1...
2025-08-23 19:45:52,948 - INFO - Starting video processing pipeline for f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:45:52,949 - INFO - Downloading video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 from S3: dev/sample/sample3.mp4
2025-08-23 19:45:54,723 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_foapuf61/input.mp4
2025-08-23 19:45:54,723 - INFO - Starting transcription for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:46:02,373 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:46:02,378 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:46:02,378 - INFO - Starting transaction splitting for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:46:24,162 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:46:24,216 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:46:24,217 - INFO - Uploading artifacts to S3 with prefix: deriv/session=f8d0bcca-97e9-4f9b-97e7-b227b78b91f1/
2025-08-23 19:46:24,595 - INFO - Artifacts uploaded to S3
2025-08-23 19:46:24,595 - INFO - Inserting 1 transactions into database
2025-08-23 19:46:24,794 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22ended_at%22%2C%22run_id%22%2C%22meta%22%2C%22kind%22%2C%22started_at%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-23 19:46:24,799 - INFO - Inserted transactions with IDs: ['2d77d84a-04f0-49ba-8cbd-6ea456b5a97e']
2025-08-23 19:46:24,799 - INFO - Starting grading for 1 transactions
2025-08-23 19:47:39,800 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:47:40,123 - INFO - Grading completed and uploaded to S3
2025-08-23 19:47:40,124 - INFO - Upserting grades for 1 transactions
2025-08-23 19:47:40,402 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22gpt_price%22%2C%22reasoning_summary%22%2C%22items_upsellable%22%2C%22issues%22%2C%22complete_order%22%2C%22items_upsold%22%2C%22num_upsize_offers%22%2C%22num_upsize_opportunities%22%2C%22upsell_possible%22%2C%22items_upsizeable%22%2C%22upsell_offered%22%2C%22upsize_possible%22%2C%22items_after%22%2C%22feedback%22%2C%22items_addonable%22%2C%22transaction_id%22%2C%22video_file_path%22%2C%22asked_more_time%22%2C%22num_upsell_success%22%2C%22num_addon_opportunities%22%2C%22items_initial%22%2C%22details%22%2C%22num_upsell_opportunities%22%2C%22out_of_stock_items%22%2C%22upsize_offered%22%2C%22num_upsize_success%22%2C%22num_items_initial%22%2C%22score%22%2C%22coupon_used%22%2C%22num_largest_offers%22%2C%22mobile_order%22%2C%22num_addon_offers%22%2C%22video_link%22%2C%22items_addon_success%22%2C%22num_upsell_offers%22%2C%22num_addon_success%22%2C%22items_upsize_success%22%2C%22num_items_after%22 "HTTP/2 201 Created"
2025-08-23 19:47:40,403 - INFO - Successfully completed all processing steps for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:47:40,407 - INFO - Cleaned up temporary files for video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:47:40,509 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 "HTTP/2 200 OK"
2025-08-23 19:47:40,510 - INFO - ✅ Successfully processed video f8d0bcca-97e9-4f9b-97e7-b227b78b91f1 in 107.46 seconds
2025-08-23 19:47:40,610 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:47:40,610 - INFO - No more uploaded videos found in queue.
2025-08-23 19:47:40,610 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-23 19:47:40,610 - INFO - Processed video IDs: f8d0bcca-97e9-4f9b-97e7-b227b78b91f1
2025-08-23 19:47:40,610 - INFO - === Batch session completed in 108.17 seconds ===
2025-08-23 19:54:07,525 - INFO - OpenAI API key found
2025-08-23 19:54:07,525 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:54:07,525 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:54:07,525 - INFO - Initializing database and S3 connections...
2025-08-23 19:54:07,543 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:54:07,611 - INFO - Successfully connected to database and S3
2025-08-23 19:54:08,054 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:54:08,065 - INFO - No more uploaded videos found in queue.
2025-08-23 19:54:08,065 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-23 19:54:08,065 - INFO - === Batch session completed in 0.54 seconds ===
2025-08-23 19:54:51,085 - INFO - OpenAI API key found
2025-08-23 19:54:51,085 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 19:54:51,085 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 19:54:51,085 - INFO - Initializing database and S3 connections...
2025-08-23 19:54:51,103 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 19:54:51,151 - INFO - Successfully connected to database and S3
2025-08-23 19:54:51,376 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:54:51,383 - INFO - Found video to process - ID: 78130140-2459-4cb3-8f22-bb05b244a325, S3 Key: dev/sample/sample4.mp4
2025-08-23 19:54:51,383 - INFO - Attempting to claim video 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:54:51,470 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.78130140-2459-4cb3-8f22-bb05b244a325&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:54:51,471 - INFO - Successfully claimed video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:54:51,471 - INFO - Starting video processing for 78130140-2459-4cb3-8f22-bb05b244a325...
2025-08-23 19:54:51,471 - INFO - Starting video processing pipeline for 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:54:51,472 - INFO - Downloading video 78130140-2459-4cb3-8f22-bb05b244a325 from S3: dev/sample/sample4.mp4
2025-08-23 19:54:52,568 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_7z2y2sc1/input.mp4
2025-08-23 19:54:52,568 - INFO - Starting transcription for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:55:01,258 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:55:01,263 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:55:01,263 - INFO - Starting transaction splitting for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:55:28,542 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:55:28,610 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:55:28,610 - INFO - Uploading artifacts to S3 with prefix: deriv/session=78130140-2459-4cb3-8f22-bb05b244a325/
2025-08-23 19:55:28,953 - INFO - Artifacts uploaded to S3
2025-08-23 19:55:28,953 - INFO - Inserting 1 transactions into database
2025-08-23 19:55:29,190 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22run_id%22%2C%22kind%22%2C%22started_at%22%2C%22meta%22%2C%22tx_range%22%2C%22ended_at%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-23 19:55:29,192 - INFO - Inserted transactions with IDs: ['0200bf58-8c00-47b2-a60d-7dea8c87dd83']
2025-08-23 19:55:29,192 - INFO - Starting grading for 1 transactions
2025-08-23 19:56:10,219 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:56:10,499 - INFO - Grading completed and uploaded to S3
2025-08-23 19:56:10,499 - INFO - Upserting grades for 1 transactions
2025-08-23 19:56:10,703 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsellable%22%2C%22num_largest_offers%22%2C%22items_addon_success%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22score%22%2C%22upsize_possible%22%2C%22items_upsizeable%22%2C%22num_addon_offers%22%2C%22upsell_offered%22%2C%22upsell_possible%22%2C%22complete_order%22%2C%22num_items_after%22%2C%22feedback%22%2C%22num_upsize_success%22%2C%22items_initial%22%2C%22items_upsold%22%2C%22out_of_stock_items%22%2C%22video_file_path%22%2C%22num_upsize_offers%22%2C%22transaction_id%22%2C%22num_items_initial%22%2C%22gpt_price%22%2C%22asked_more_time%22%2C%22coupon_used%22%2C%22num_addon_opportunities%22%2C%22upsize_offered%22%2C%22num_addon_success%22%2C%22items_addonable%22%2C%22items_after%22%2C%22details%22%2C%22video_link%22%2C%22mobile_order%22%2C%22num_upsell_success%22%2C%22reasoning_summary%22%2C%22items_upsize_success%22%2C%22issues%22%2C%22num_upsell_opportunities%22 "HTTP/2 201 Created"
2025-08-23 19:56:10,704 - INFO - Successfully completed all processing steps for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:56:10,707 - INFO - Cleaned up temporary files for video 78130140-2459-4cb3-8f22-bb05b244a325
2025-08-23 19:56:10,799 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.78130140-2459-4cb3-8f22-bb05b244a325 "HTTP/2 200 OK"
2025-08-23 19:56:10,800 - INFO - ✅ Successfully processed video 78130140-2459-4cb3-8f22-bb05b244a325 in 79.24 seconds
2025-08-23 19:56:10,893 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:56:10,894 - INFO - Found video to process - ID: a2ba5b09-5ed4-406c-93e9-85a94c1f1a45, S3 Key: dev/sample/sample1.mp4
2025-08-23 19:56:10,894 - INFO - Attempting to claim video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:56:10,985 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:56:10,988 - INFO - Successfully claimed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:10,988 - INFO - Starting video processing for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45...
2025-08-23 19:56:10,988 - INFO - Starting video processing pipeline for a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:10,988 - INFO - Downloading video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 from S3: dev/sample/sample1.mp4
2025-08-23 19:56:12,038 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_ct5e6qg9/input.mp4
2025-08-23 19:56:12,039 - INFO - Starting transcription for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:16,713 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:56:16,718 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:56:16,718 - INFO - Starting transaction splitting for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:25,454 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:56:25,459 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:56:25,459 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a2ba5b09-5ed4-406c-93e9-85a94c1f1a45/
2025-08-23 19:56:25,654 - INFO - Artifacts uploaded to S3
2025-08-23 19:56:25,654 - INFO - Inserting 1 transactions into database
2025-08-23 19:56:25,806 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22run_id%22%2C%22kind%22%2C%22started_at%22%2C%22meta%22%2C%22tx_range%22%2C%22ended_at%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-23 19:56:25,810 - INFO - Inserted transactions with IDs: ['b3327f8b-7ebc-4774-ae6e-9287724fb373']
2025-08-23 19:56:25,810 - INFO - Starting grading for 1 transactions
2025-08-23 19:56:43,457 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:56:43,560 - INFO - Grading completed and uploaded to S3
2025-08-23 19:56:43,561 - INFO - Upserting grades for 1 transactions
2025-08-23 19:56:43,715 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsellable%22%2C%22num_largest_offers%22%2C%22items_addon_success%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22score%22%2C%22upsize_possible%22%2C%22items_upsizeable%22%2C%22num_addon_offers%22%2C%22upsell_offered%22%2C%22upsell_possible%22%2C%22complete_order%22%2C%22num_items_after%22%2C%22feedback%22%2C%22num_upsize_success%22%2C%22items_initial%22%2C%22items_upsold%22%2C%22out_of_stock_items%22%2C%22video_file_path%22%2C%22num_upsize_offers%22%2C%22transaction_id%22%2C%22num_items_initial%22%2C%22gpt_price%22%2C%22asked_more_time%22%2C%22coupon_used%22%2C%22num_addon_opportunities%22%2C%22upsize_offered%22%2C%22num_addon_success%22%2C%22items_addonable%22%2C%22items_after%22%2C%22details%22%2C%22video_link%22%2C%22mobile_order%22%2C%22num_upsell_success%22%2C%22reasoning_summary%22%2C%22items_upsize_success%22%2C%22issues%22%2C%22num_upsell_opportunities%22 "HTTP/2 201 Created"
2025-08-23 19:56:43,717 - INFO - Successfully completed all processing steps for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:43,717 - INFO - Cleaned up temporary files for video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45
2025-08-23 19:56:43,805 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 "HTTP/2 200 OK"
2025-08-23 19:56:43,806 - INFO - ✅ Successfully processed video a2ba5b09-5ed4-406c-93e9-85a94c1f1a45 in 32.73 seconds
2025-08-23 19:56:43,891 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:56:43,893 - INFO - Found video to process - ID: a8a3a805-7cec-4902-ad50-74e65a0c7880, S3 Key: dev/sample/sample2.mp4
2025-08-23 19:56:43,893 - INFO - Attempting to claim video a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:56:43,972 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:56:43,974 - INFO - Successfully claimed video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:56:43,974 - INFO - Starting video processing for a8a3a805-7cec-4902-ad50-74e65a0c7880...
2025-08-23 19:56:43,974 - INFO - Starting video processing pipeline for a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:56:43,975 - INFO - Downloading video a8a3a805-7cec-4902-ad50-74e65a0c7880 from S3: dev/sample/sample2.mp4
2025-08-23 19:56:46,029 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_sqibx8gq/input.mp4
2025-08-23 19:56:46,029 - INFO - Starting transcription for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:56:50,246 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:56:50,251 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:56:50,252 - INFO - Starting transaction splitting for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:57:01,572 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:57:01,576 - INFO - Transaction splitting completed: 1 transactions identified
2025-08-23 19:57:01,576 - INFO - Uploading artifacts to S3 with prefix: deriv/session=a8a3a805-7cec-4902-ad50-74e65a0c7880/
2025-08-23 19:57:01,761 - INFO - Artifacts uploaded to S3
2025-08-23 19:57:01,762 - INFO - Inserting 1 transactions into database
2025-08-23 19:57:01,960 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22run_id%22%2C%22kind%22%2C%22started_at%22%2C%22meta%22%2C%22tx_range%22%2C%22ended_at%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-23 19:57:01,961 - INFO - Inserted transactions with IDs: ['9f3278d1-6c2c-4c93-bb37-0e28701e842f']
2025-08-23 19:57:01,962 - INFO - Starting grading for 1 transactions
2025-08-23 19:57:45,943 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-23 19:57:46,215 - INFO - Grading completed and uploaded to S3
2025-08-23 19:57:46,215 - INFO - Upserting grades for 1 transactions
2025-08-23 19:57:46,540 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsellable%22%2C%22num_largest_offers%22%2C%22items_addon_success%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22score%22%2C%22upsize_possible%22%2C%22items_upsizeable%22%2C%22num_addon_offers%22%2C%22upsell_offered%22%2C%22upsell_possible%22%2C%22complete_order%22%2C%22num_items_after%22%2C%22feedback%22%2C%22num_upsize_success%22%2C%22items_initial%22%2C%22items_upsold%22%2C%22out_of_stock_items%22%2C%22video_file_path%22%2C%22num_upsize_offers%22%2C%22transaction_id%22%2C%22num_items_initial%22%2C%22gpt_price%22%2C%22asked_more_time%22%2C%22coupon_used%22%2C%22num_addon_opportunities%22%2C%22upsize_offered%22%2C%22num_addon_success%22%2C%22items_addonable%22%2C%22items_after%22%2C%22details%22%2C%22video_link%22%2C%22mobile_order%22%2C%22num_upsell_success%22%2C%22reasoning_summary%22%2C%22items_upsize_success%22%2C%22issues%22%2C%22num_upsell_opportunities%22 "HTTP/2 201 Created"
2025-08-23 19:57:46,542 - INFO - Successfully completed all processing steps for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:57:46,545 - INFO - Cleaned up temporary files for video a8a3a805-7cec-4902-ad50-74e65a0c7880
2025-08-23 19:57:46,633 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.a8a3a805-7cec-4902-ad50-74e65a0c7880 "HTTP/2 200 OK"
2025-08-23 19:57:46,635 - INFO - ✅ Successfully processed video a8a3a805-7cec-4902-ad50-74e65a0c7880 in 62.57 seconds
2025-08-23 19:57:46,713 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 19:57:46,714 - INFO - Found video to process - ID: e497bb2f-00c5-418a-b7c3-4d221dc89374, S3 Key: dev/sample/sample.mp4
2025-08-23 19:57:46,715 - INFO - Attempting to claim video e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:57:46,807 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.e497bb2f-00c5-418a-b7c3-4d221dc89374&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 19:57:46,809 - INFO - Successfully claimed video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:57:46,809 - INFO - Starting video processing for e497bb2f-00c5-418a-b7c3-4d221dc89374...
2025-08-23 19:57:46,809 - INFO - Starting video processing pipeline for e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:57:46,809 - INFO - Downloading video e497bb2f-00c5-418a-b7c3-4d221dc89374 from S3: dev/sample/sample.mp4
2025-08-23 19:57:48,695 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_bj5o3wuy/input.mp4
2025-08-23 19:57:48,695 - INFO - Starting transcription for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:57:56,390 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-23 19:57:56,393 - INFO - Transcription completed: 1 segments generated
2025-08-23 19:57:56,393 - INFO - Starting transaction splitting for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:58:14,421 - INFO - Cleaned up temporary files for video e497bb2f-00c5-418a-b7c3-4d221dc89374
2025-08-23 19:58:14,421 - INFO - === Batch session completed in 203.34 seconds ===
2025-08-23 20:05:46,904 - INFO - OpenAI API key found
2025-08-23 20:05:46,904 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-23 20:05:46,904 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-23 20:05:46,904 - INFO - Initializing database and S3 connections...
2025-08-23 20:05:46,922 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-23 20:05:46,985 - INFO - Successfully connected to database and S3
2025-08-23 20:05:47,209 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 20:05:47,213 - INFO - Found video to process - ID: 092f4ca0-8392-4a58-9a0f-82b51f1b5836, S3 Key: dev/sample/sample10.avi
2025-08-23 20:05:47,213 - INFO - Attempting to claim video 092f4ca0-8392-4a58-9a0f-82b51f1b5836...
2025-08-23 20:05:47,302 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.092f4ca0-8392-4a58-9a0f-82b51f1b5836&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 20:05:47,303 - INFO - Successfully claimed video 092f4ca0-8392-4a58-9a0f-82b51f1b5836
2025-08-23 20:05:47,303 - INFO - Starting video processing for 092f4ca0-8392-4a58-9a0f-82b51f1b5836...
2025-08-23 20:05:47,303 - INFO - Starting video processing pipeline for 092f4ca0-8392-4a58-9a0f-82b51f1b5836
2025-08-23 20:05:47,306 - INFO - Downloading video 092f4ca0-8392-4a58-9a0f-82b51f1b5836 from S3: dev/sample/sample10.avi
2025-08-23 20:05:47,549 - INFO - Cleaned up temporary files for video 092f4ca0-8392-4a58-9a0f-82b51f1b5836
2025-08-23 20:05:47,550 - ERROR - ❌ Error processing video 092f4ca0-8392-4a58-9a0f-82b51f1b5836 after 0.25 seconds: An error occurred (404) when calling the HeadObject operation: Not Found
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 83, in main
    process_one_video(db, s3, row)  # Settings object is created inside the function
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 147, in process_one_video
    download_to_file(s3, settings.RAW_BUCKET, s3_key, local_path)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../integrations/s3_client.py", line 29, in download_to_file
    s3.download_file(bucket, key, dest_path)
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/inject.py", line 192, in download_file
    return transfer.download_file(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/transfer.py", line 406, in download_file
    future.result()
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 264, in result
    raise self._exception
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/tasks.py", line 265, in _main
    self._submit(transfer_future=transfer_future, **kwargs)
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/download.py", line 352, in _submit
    response = client.head_object(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 1017, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (404) when calling the HeadObject operation: Not Found
2025-08-23 20:05:47,637 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.092f4ca0-8392-4a58-9a0f-82b51f1b5836 "HTTP/2 200 OK"
2025-08-23 20:05:47,639 - INFO - Marked video 092f4ca0-8392-4a58-9a0f-82b51f1b5836 as failed in database
2025-08-23 20:05:47,717 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 20:05:47,719 - INFO - Found video to process - ID: 4e2fe082-9391-4307-be59-1fa06dda4789, S3 Key: dev/sample/sample11.avi
2025-08-23 20:05:47,719 - INFO - Attempting to claim video 4e2fe082-9391-4307-be59-1fa06dda4789...
2025-08-23 20:05:47,813 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.4e2fe082-9391-4307-be59-1fa06dda4789&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 20:05:47,815 - INFO - Successfully claimed video 4e2fe082-9391-4307-be59-1fa06dda4789
2025-08-23 20:05:47,815 - INFO - Starting video processing for 4e2fe082-9391-4307-be59-1fa06dda4789...
2025-08-23 20:05:47,815 - INFO - Starting video processing pipeline for 4e2fe082-9391-4307-be59-1fa06dda4789
2025-08-23 20:05:47,816 - INFO - Downloading video 4e2fe082-9391-4307-be59-1fa06dda4789 from S3: dev/sample/sample11.avi
2025-08-23 20:05:47,855 - INFO - Cleaned up temporary files for video 4e2fe082-9391-4307-be59-1fa06dda4789
2025-08-23 20:05:47,855 - ERROR - ❌ Error processing video 4e2fe082-9391-4307-be59-1fa06dda4789 after 0.04 seconds: An error occurred (404) when calling the HeadObject operation: Not Found
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 83, in main
    process_one_video(db, s3, row)  # Settings object is created inside the function
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 147, in process_one_video
    download_to_file(s3, settings.RAW_BUCKET, s3_key, local_path)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../integrations/s3_client.py", line 29, in download_to_file
    s3.download_file(bucket, key, dest_path)
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/inject.py", line 192, in download_file
    return transfer.download_file(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/transfer.py", line 406, in download_file
    future.result()
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 264, in result
    raise self._exception
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/tasks.py", line 265, in _main
    self._submit(transfer_future=transfer_future, **kwargs)
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/download.py", line 352, in _submit
    response = client.head_object(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 1017, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (404) when calling the HeadObject operation: Not Found
2025-08-23 20:05:47,956 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.4e2fe082-9391-4307-be59-1fa06dda4789 "HTTP/2 200 OK"
2025-08-23 20:05:47,957 - INFO - Marked video 4e2fe082-9391-4307-be59-1fa06dda4789 as failed in database
2025-08-23 20:05:48,027 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 20:05:48,027 - INFO - Found video to process - ID: 2db2a830-5837-4132-8080-a28cf7f68702, S3 Key: dev/sample/sample12.avi
2025-08-23 20:05:48,027 - INFO - Attempting to claim video 2db2a830-5837-4132-8080-a28cf7f68702...
2025-08-23 20:05:48,136 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.2db2a830-5837-4132-8080-a28cf7f68702&status=eq.uploaded "HTTP/2 200 OK"
2025-08-23 20:05:48,137 - INFO - Successfully claimed video 2db2a830-5837-4132-8080-a28cf7f68702
2025-08-23 20:05:48,137 - INFO - Starting video processing for 2db2a830-5837-4132-8080-a28cf7f68702...
2025-08-23 20:05:48,137 - INFO - Starting video processing pipeline for 2db2a830-5837-4132-8080-a28cf7f68702
2025-08-23 20:05:48,138 - INFO - Downloading video 2db2a830-5837-4132-8080-a28cf7f68702 from S3: dev/sample/sample12.avi
2025-08-23 20:05:48,175 - INFO - Cleaned up temporary files for video 2db2a830-5837-4132-8080-a28cf7f68702
2025-08-23 20:05:48,175 - ERROR - ❌ Error processing video 2db2a830-5837-4132-8080-a28cf7f68702 after 0.04 seconds: An error occurred (404) when calling the HeadObject operation: Not Found
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 83, in main
    process_one_video(db, s3, row)  # Settings object is created inside the function
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 147, in process_one_video
    download_to_file(s3, settings.RAW_BUCKET, s3_key, local_path)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../integrations/s3_client.py", line 29, in download_to_file
    s3.download_file(bucket, key, dest_path)
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/inject.py", line 192, in download_file
    return transfer.download_file(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/transfer.py", line 406, in download_file
    future.result()
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 264, in result
    raise self._exception
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/tasks.py", line 265, in _main
    self._submit(transfer_future=transfer_future, **kwargs)
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/download.py", line 352, in _submit
    response = client.head_object(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 1017, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (404) when calling the HeadObject operation: Not Found
2025-08-23 20:05:48,276 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.2db2a830-5837-4132-8080-a28cf7f68702 "HTTP/2 200 OK"
2025-08-23 20:05:48,277 - INFO - Marked video 2db2a830-5837-4132-8080-a28cf7f68702 as failed in database
2025-08-23 20:05:48,356 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-23 20:05:48,357 - INFO - No more uploaded videos found in queue.
2025-08-23 20:05:48,357 - INFO - Batch complete. Succeeded: 0, Failed: 3, Total: 3
2025-08-23 20:05:48,357 - INFO - === Batch session completed in 1.45 seconds ===
2025-08-24 02:34:12,943 - INFO - OpenAI API key found
2025-08-24 02:34:12,944 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:34:12,944 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:34:12,944 - INFO - Initializing database and S3 connections...
2025-08-24 02:34:12,962 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:34:13,007 - INFO - Successfully connected to database and S3
2025-08-24 02:34:13,589 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:34:13,598 - INFO - Found video to process - ID: b13b6e34-5bfb-42e2-bd9f-0656365eb8ac, S3 Key: dev/sample/DT_File20250817210001000.avi
2025-08-24 02:34:13,598 - INFO - Attempting to claim video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac...
2025-08-24 02:34:13,690 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.b13b6e34-5bfb-42e2-bd9f-0656365eb8ac&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 02:34:13,690 - INFO - Successfully claimed video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac
2025-08-24 02:34:13,691 - INFO - Starting video processing for b13b6e34-5bfb-42e2-bd9f-0656365eb8ac...
2025-08-24 02:34:13,691 - INFO - Starting video processing pipeline for b13b6e34-5bfb-42e2-bd9f-0656365eb8ac
2025-08-24 02:34:13,692 - INFO - Downloading video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac from S3: dev/sample/DT_File20250817210001000.avi
2025-08-24 02:34:13,882 - INFO - Cleaned up temporary files for video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac
2025-08-24 02:34:13,882 - ERROR - ❌ Error processing video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac after 0.19 seconds: An error occurred (404) when calling the HeadObject operation: Not Found
Traceback (most recent call last):
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/run_once.py", line 83, in main
    process_one_video(db, s3, row)  # Settings object is created inside the function
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../worker/pipeline.py", line 207, in process_one_video
    download_to_file(s3, settings.RAW_BUCKET, s3_key, local_path)
  File "/Users/ronitjain/Desktop/Hoptix/hoptix-flask/scripts/../integrations/s3_client.py", line 29, in download_to_file
    s3.download_file(bucket, key, dest_path)
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/inject.py", line 192, in download_file
    return transfer.download_file(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/boto3/s3/transfer.py", line 406, in download_file
    future.result()
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 103, in result
    return self._coordinator.result()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/futures.py", line 264, in result
    raise self._exception
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/tasks.py", line 265, in _main
    self._submit(transfer_future=transfer_future, **kwargs)
  File "/opt/miniconda3/lib/python3.12/site-packages/s3transfer/download.py", line 352, in _submit
    response = client.head_object(
               ^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 565, in _api_call
    return self._make_api_call(operation_name, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/miniconda3/lib/python3.12/site-packages/botocore/client.py", line 1017, in _make_api_call
    raise error_class(parsed_response, operation_name)
botocore.exceptions.ClientError: An error occurred (404) when calling the HeadObject operation: Not Found
2025-08-24 02:34:14,045 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.b13b6e34-5bfb-42e2-bd9f-0656365eb8ac "HTTP/2 200 OK"
2025-08-24 02:34:14,048 - INFO - Marked video b13b6e34-5bfb-42e2-bd9f-0656365eb8ac as failed in database
2025-08-24 02:34:14,206 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:34:14,208 - INFO - Found video to process - ID: c3ad8372-41bf-430d-9206-bc2df059f917, S3 Key: dev/sample/DT_File20250817180001000.avi
2025-08-24 02:34:14,208 - INFO - Attempting to claim video c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 02:34:14,338 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c3ad8372-41bf-430d-9206-bc2df059f917&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 02:34:14,340 - INFO - Successfully claimed video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 02:34:14,340 - INFO - Starting video processing for c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 02:34:14,340 - INFO - Starting video processing pipeline for c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 02:34:14,341 - INFO - Downloading video c3ad8372-41bf-430d-9206-bc2df059f917 from S3: dev/sample/DT_File20250817180001000.avi
2025-08-24 02:34:30,438 - INFO - Cleaned up temporary files for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 02:34:30,439 - INFO - === Batch session completed in 17.50 seconds ===
2025-08-24 02:34:49,723 - INFO - OpenAI API key found
2025-08-24 02:34:49,723 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:34:49,723 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:34:49,723 - INFO - Initializing database and S3 connections...
2025-08-24 02:34:49,740 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:34:49,785 - INFO - Successfully connected to database and S3
2025-08-24 02:34:50,032 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:34:50,040 - INFO - Found video to process - ID: c597c72f-b3cd-48ac-8413-8251a40ce880, S3 Key: dev/sample/DT_File20250817200001000.avi
2025-08-24 02:34:50,041 - INFO - Attempting to claim video c597c72f-b3cd-48ac-8413-8251a40ce880...
2025-08-24 02:34:50,117 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c597c72f-b3cd-48ac-8413-8251a40ce880&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 02:34:50,118 - INFO - Successfully claimed video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 02:34:50,118 - INFO - Starting video processing for c597c72f-b3cd-48ac-8413-8251a40ce880...
2025-08-24 02:34:50,118 - INFO - Starting video processing pipeline for c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 02:34:50,119 - INFO - Downloading video c597c72f-b3cd-48ac-8413-8251a40ce880 from S3: dev/sample/DT_File20250817200001000.avi
2025-08-24 02:37:09,019 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_qixj1nam/input.mp4
2025-08-24 02:37:09,019 - INFO - Starting transcription for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 02:37:34,369 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:37,531 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:41,715 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:44,355 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:49,624 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:54,152 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:37:56,281 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:01,792 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:12,577 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:23,164 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:26,736 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:35,886 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:43,912 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:38:43,951 - INFO - Transcription completed: 13 segments generated
2025-08-24 02:38:43,951 - INFO - Starting transaction splitting for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 02:38:48,280 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:38:53,324 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:39:05,253 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:39:10,666 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:39:33,213 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:39:44,911 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:39:49,288 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:40:10,852 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:40:16,889 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:40:37,213 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:40:43,083 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:40:51,754 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:41:09,128 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:41:09,131 - INFO - Transaction splitting completed: 21 transactions identified
2025-08-24 02:41:09,132 - INFO - Uploading artifacts to S3 with prefix: deriv/session=c597c72f-b3cd-48ac-8413-8251a40ce880/
2025-08-24 02:41:09,587 - INFO - Artifacts uploaded to S3
2025-08-24 02:41:09,588 - INFO - Inserting 21 transactions into database
2025-08-24 02:41:09,588 - INFO - Transaction 1: 2025-08-17T20:00:01Z to 2025-08-17T20:01:31Z (video seconds 0.0-90.0)
2025-08-24 02:41:09,588 - INFO - Transaction 2: 2025-08-17T20:10:31Z to 2025-08-17T20:11:31Z (video seconds 630.0-690.0)
2025-08-24 02:41:09,588 - INFO - Transaction 3: 2025-08-17T20:12:01Z to 2025-08-17T20:12:31Z (video seconds 720.0-750.0)
2025-08-24 02:41:09,588 - INFO - Transaction 4: 2025-08-17T20:12:31Z to 2025-08-17T20:13:01Z (video seconds 750.0-780.0)
2025-08-24 02:41:09,588 - INFO - Transaction 5: 2025-08-17T20:15:01Z to 2025-08-17T20:16:01Z (video seconds 900.0-960.0)
2025-08-24 02:41:09,588 - INFO - Transaction 6: 2025-08-17T20:21:16Z to 2025-08-17T20:22:46Z (video seconds 1275.0-1365.0)
2025-08-24 02:41:09,589 - INFO - Transaction 7: 2025-08-17T20:26:01Z to 2025-08-17T20:27:01Z (video seconds 1560.0-1620.0)
2025-08-24 02:41:09,589 - INFO - Transaction 8: 2025-08-17T20:29:16Z to 2025-08-17T20:30:01Z (video seconds 1755.0-1800.0)
2025-08-24 02:41:09,589 - INFO - Transaction 9: 2025-08-17T20:31:16Z to 2025-08-17T20:32:06Z (video seconds 1875.0-1925.0)
2025-08-24 02:41:09,589 - INFO - Transaction 10: 2025-08-17T20:32:06Z to 2025-08-17T20:32:56Z (video seconds 1925.0-1975.0)
2025-08-24 02:41:09,589 - INFO - Transaction 11: 2025-08-17T20:32:56Z to 2025-08-17T20:33:46Z (video seconds 1975.0-2025.0)
2025-08-24 02:41:09,589 - INFO - Transaction 12: 2025-08-17T20:34:31Z to 2025-08-17T20:41:16Z (video seconds 2070.0-2475.0)
2025-08-24 02:41:09,589 - INFO - Transaction 13: 2025-08-17T20:43:46Z to 2025-08-17T20:45:11Z (video seconds 2625.0-2710.0)
2025-08-24 02:41:09,589 - INFO - Transaction 14: 2025-08-17T20:45:11Z to 2025-08-17T20:46:36Z (video seconds 2710.0-2795.0)
2025-08-24 02:41:09,589 - INFO - Transaction 15: 2025-08-17T20:46:36Z to 2025-08-17T20:48:01Z (video seconds 2795.0-2880.0)
2025-08-24 02:41:09,589 - INFO - Transaction 16: 2025-08-17T20:48:31Z to 2025-08-17T20:49:46Z (video seconds 2910.0-2985.0)
2025-08-24 02:41:09,589 - INFO - Transaction 17: 2025-08-17T20:50:31Z to 2025-08-17T20:55:01Z (video seconds 3030.0-3300.0)
2025-08-24 02:41:09,590 - INFO - Transaction 18: 2025-08-17T20:56:31Z to 2025-08-17T20:57:23.217500Z (video seconds 3390.0-3442.2174999999997)
2025-08-24 02:41:09,590 - INFO - Transaction 19: 2025-08-17T20:57:23.217500Z to 2025-08-17T20:58:15.435000Z (video seconds 3442.2174999999997-3494.435)
2025-08-24 02:41:09,590 - INFO - Transaction 20: 2025-08-17T20:58:15.435000Z to 2025-08-17T20:59:07.652500Z (video seconds 3494.435-3546.6525)
2025-08-24 02:41:09,590 - INFO - Transaction 21: 2025-08-17T20:59:07.652500Z to 2025-08-17T20:59:59.870000Z (video seconds 3546.6525-3598.87)
2025-08-24 02:41:09,593 - INFO - Saved 21 transaction records to exports/20250824_024109_transactions.csv
2025-08-24 02:41:09,897 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22video_id%22%2C%22kind%22%2C%22tx_range%22%2C%22started_at%22%2C%22ended_at%22%2C%22run_id%22%2C%22meta%22 "HTTP/2 201 Created"
2025-08-24 02:41:09,906 - INFO - Inserted transactions with IDs: ['9738fcce-e099-41b9-aefc-f1995164c9af', 'b01ce48f-aa69-4226-8121-fb73adcfc283', '99d84d2e-c899-4e88-bf8d-fbfe93990b37', '256f9e22-2334-4bcf-a3c6-61313a1c175e', 'deb1588b-4435-4834-83e1-01da6c3bce2b', '7ba0740b-cbe5-464c-97ea-fbf12f805e44', '32edec87-4f62-4486-8761-8b65f10bb8c2', '9ab3b640-878e-46d5-a9bc-0a204b939d80', '6cfedbb7-e75b-41b2-bf0f-a7a66d27f215', '6f555ef6-54b3-4db0-895c-fbae47deec68', '0b894ebc-134e-46e3-b943-74b17180ba7c', '382e0789-7bbc-469f-bf5e-7a221d29284e', 'd7067592-6eaa-41b2-af77-a82ba097f6ec', 'b67c2861-6fbe-4bb3-8241-f7774f8087fe', '41e4c01e-3e10-4bd3-8464-065e2ca95fce', '032c9ed7-a011-43ed-abff-052414601752', '213e0a12-6a8a-4055-ae14-e79b1aec8abc', 'aadfa079-e673-4cf8-ab58-2dcaeb029eaf', '61849cd6-6005-45aa-bf81-6009d898a62e', '6469d9d6-1620-4cb4-bf7f-9fdbe94691f5', '83f6c968-2c63-4e00-816e-60d86361dcf0']
2025-08-24 02:41:09,906 - INFO - Starting grading for 21 transactions
2025-08-24 02:41:51,626 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:42:26,879 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:42:56,474 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:43:24,860 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:44:00,781 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:45:19,133 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:45:53,884 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:46:04,258 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:46:13,443 - INFO - Cleaned up temporary files for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 02:46:13,443 - INFO - === Batch session completed in 683.72 seconds ===
2025-08-24 02:46:35,897 - INFO - OpenAI API key found
2025-08-24 02:46:35,897 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:46:35,897 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:46:35,897 - INFO - Initializing database and S3 connections...
2025-08-24 02:46:35,916 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:46:35,986 - INFO - Successfully connected to database and S3
2025-08-24 02:46:36,455 - INFO - OpenAI API key found
2025-08-24 02:46:36,455 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:46:36,455 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:46:36,455 - INFO - Initializing database and S3 connections...
2025-08-24 02:46:36,471 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:46:36,496 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:46:36,499 - INFO - Found video to process - ID: ddc154a6-29bf-47fc-9060-5f0fafaf1044, S3 Key: dev/sample/DT_File20250817170001000.avi
2025-08-24 02:46:36,499 - INFO - Attempting to claim video ddc154a6-29bf-47fc-9060-5f0fafaf1044...
2025-08-24 02:46:36,508 - INFO - Successfully connected to database and S3
2025-08-24 02:46:36,618 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.ddc154a6-29bf-47fc-9060-5f0fafaf1044&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 02:46:36,618 - INFO - Successfully claimed video ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 02:46:36,618 - INFO - Starting video processing for ddc154a6-29bf-47fc-9060-5f0fafaf1044...
2025-08-24 02:46:36,618 - INFO - Starting video processing pipeline for ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 02:46:36,619 - INFO - Downloading video ddc154a6-29bf-47fc-9060-5f0fafaf1044 from S3: dev/sample/DT_File20250817170001000.avi
2025-08-24 02:46:36,728 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:46:36,739 - INFO - Found video to process - ID: f40e1720-e979-4898-98c7-4dbf7b22387d, S3 Key: dev/sample/DT_File20250817190001000.avi
2025-08-24 02:46:36,739 - INFO - Attempting to claim video f40e1720-e979-4898-98c7-4dbf7b22387d...
2025-08-24 02:46:36,846 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f40e1720-e979-4898-98c7-4dbf7b22387d&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 02:46:36,846 - INFO - Successfully claimed video f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 02:46:36,846 - INFO - Starting video processing for f40e1720-e979-4898-98c7-4dbf7b22387d...
2025-08-24 02:46:36,846 - INFO - Starting video processing pipeline for f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 02:46:36,847 - INFO - Downloading video f40e1720-e979-4898-98c7-4dbf7b22387d from S3: dev/sample/DT_File20250817190001000.avi
2025-08-24 02:46:37,668 - INFO - OpenAI API key found
2025-08-24 02:46:37,668 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:46:37,668 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:46:37,668 - INFO - Initializing database and S3 connections...
2025-08-24 02:46:37,685 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:46:37,721 - INFO - Successfully connected to database and S3
2025-08-24 02:46:38,497 - INFO - OpenAI API key found
2025-08-24 02:46:38,497 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:46:38,497 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:46:38,497 - INFO - Initializing database and S3 connections...
2025-08-24 02:46:38,514 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:46:38,552 - INFO - Successfully connected to database and S3
2025-08-24 02:46:38,862 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:46:38,866 - INFO - No more uploaded videos found in queue.
2025-08-24 02:46:38,866 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 02:46:38,866 - INFO - === Batch session completed in 1.20 seconds ===
2025-08-24 02:46:39,529 - INFO - OpenAI API key found
2025-08-24 02:46:39,529 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 02:46:39,529 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 02:46:39,529 - INFO - Initializing database and S3 connections...
2025-08-24 02:46:39,545 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 02:46:39,586 - INFO - Successfully connected to database and S3
2025-08-24 02:46:41,212 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:46:41,224 - INFO - No more uploaded videos found in queue.
2025-08-24 02:46:41,224 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 02:46:41,224 - INFO - === Batch session completed in 2.73 seconds ===
2025-08-24 02:46:43,685 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 02:46:43,698 - INFO - No more uploaded videos found in queue.
2025-08-24 02:46:43,698 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 02:46:43,698 - INFO - === Batch session completed in 4.17 seconds ===
2025-08-24 02:51:23,034 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_3ol_vuk8/input.mp4
2025-08-24 02:51:23,034 - INFO - Starting transcription for video f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 02:51:24,247 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_8ylv5nu5/input.mp4
2025-08-24 02:51:24,247 - INFO - Starting transcription for video ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 02:51:51,073 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:51:53,000 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:51:55,347 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:00,134 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:01,933 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:04,015 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:07,307 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:08,435 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:13,984 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:15,207 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:16,707 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:21,328 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:27,837 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:31,056 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:32,695 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:33,694 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:35,819 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:41,777 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:46,111 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:46,149 - INFO - Transcription completed: 13 segments generated
2025-08-24 02:52:46,149 - INFO - Starting transaction splitting for video f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 02:52:48,977 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:52:54,711 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:04,190 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:07,307 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:08,414 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:10,663 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:15,191 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:21,705 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:36,654 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 02:53:36,687 - INFO - Transcription completed: 13 segments generated
2025-08-24 02:53:36,687 - INFO - Starting transaction splitting for video ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 02:53:45,654 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:49,364 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:53,182 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:55,787 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:57,562 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:53:59,449 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:01,848 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:12,848 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:18,258 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:33,136 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:38,741 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:42,646 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:44,590 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:48,629 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:54:52,271 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:55:09,552 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:55:16,497 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:55:16,500 - INFO - Transaction splitting completed: 24 transactions identified
2025-08-24 02:55:16,500 - INFO - Uploading artifacts to S3 with prefix: deriv/session=f40e1720-e979-4898-98c7-4dbf7b22387d/
2025-08-24 02:55:16,898 - INFO - Artifacts uploaded to S3
2025-08-24 02:55:16,898 - INFO - Inserting 24 transactions into database
2025-08-24 02:55:16,899 - INFO - Transaction 1: 2025-08-17T19:02:31Z to 2025-08-17T19:03:31Z (video seconds 150.0-210.0)
2025-08-24 02:55:16,899 - INFO - Transaction 2: 2025-08-17T19:03:31Z to 2025-08-17T19:04:31Z (video seconds 210.0-270.0)
2025-08-24 02:55:16,899 - INFO - Transaction 3: 2025-08-17T19:11:16Z to 2025-08-17T19:12:01Z (video seconds 675.0-720.0)
2025-08-24 02:55:16,899 - INFO - Transaction 4: 2025-08-17T19:15:01Z to 2025-08-17T19:15:55Z (video seconds 900.0-954.0)
2025-08-24 02:55:16,899 - INFO - Transaction 5: 2025-08-17T19:15:55Z to 2025-08-17T19:16:49Z (video seconds 954.0-1008.0)
2025-08-24 02:55:16,899 - INFO - Transaction 6: 2025-08-17T19:16:49Z to 2025-08-17T19:17:43Z (video seconds 1008.0-1062.0)
2025-08-24 02:55:16,900 - INFO - Transaction 7: 2025-08-17T19:17:43Z to 2025-08-17T19:18:37Z (video seconds 1062.0-1116.0)
2025-08-24 02:55:16,900 - INFO - Transaction 8: 2025-08-17T19:18:37Z to 2025-08-17T19:19:31Z (video seconds 1116.0-1170.0)
2025-08-24 02:55:16,900 - INFO - Transaction 9: 2025-08-17T19:20:31Z to 2025-08-17T19:21:31Z (video seconds 1230.0-1290.0)
2025-08-24 02:55:16,900 - INFO - Transaction 10: 2025-08-17T19:22:46Z to 2025-08-17T19:27:16Z (video seconds 1365.0-1635.0)
2025-08-24 02:55:16,900 - INFO - Transaction 11: 2025-08-17T19:28:31Z to 2025-08-17T19:29:16Z (video seconds 1710.0-1755.0)
2025-08-24 02:55:16,900 - INFO - Transaction 12: 2025-08-17T19:33:31Z to 2025-08-17T19:34:23.500000Z (video seconds 2010.0-2062.5)
2025-08-24 02:55:16,900 - INFO - Transaction 13: 2025-08-17T19:34:23.500000Z to 2025-08-17T19:35:16Z (video seconds 2062.5-2115.0)
2025-08-24 02:55:16,900 - INFO - Transaction 14: 2025-08-17T19:36:01Z to 2025-08-17T19:36:34.750000Z (video seconds 2160.0-2193.75)
2025-08-24 02:55:16,901 - INFO - Transaction 15: 2025-08-17T19:36:34.750000Z to 2025-08-17T19:37:08.500000Z (video seconds 2193.75-2227.5)
2025-08-24 02:55:16,901 - INFO - Transaction 16: 2025-08-17T19:37:08.500000Z to 2025-08-17T19:37:42.250000Z (video seconds 2227.5-2261.25)
2025-08-24 02:55:16,901 - INFO - Transaction 17: 2025-08-17T19:37:42.250000Z to 2025-08-17T19:38:16Z (video seconds 2261.25-2295.0)
2025-08-24 02:55:16,901 - INFO - Transaction 18: 2025-08-17T19:39:46Z to 2025-08-17T19:40:31Z (video seconds 2385.0-2430.0)
2025-08-24 02:55:16,901 - INFO - Transaction 19: 2025-08-17T19:42:01Z to 2025-08-17T19:42:46Z (video seconds 2520.0-2565.0)
2025-08-24 02:55:16,901 - INFO - Transaction 20: 2025-08-17T19:44:01Z to 2025-08-17T19:44:46Z (video seconds 2640.0-2685.0)
2025-08-24 02:55:16,901 - INFO - Transaction 21: 2025-08-17T19:48:46Z to 2025-08-17T19:49:46Z (video seconds 2925.0-2985.0)
2025-08-24 02:55:16,901 - INFO - Transaction 22: 2025-08-17T19:49:46Z to 2025-08-17T19:50:46Z (video seconds 2985.0-3045.0)
2025-08-24 02:55:16,901 - INFO - Transaction 23: 2025-08-17T19:54:16Z to 2025-08-17T19:55:08.500000Z (video seconds 3255.0-3307.5)
2025-08-24 02:55:16,901 - INFO - Transaction 24: 2025-08-17T19:55:08.500000Z to 2025-08-17T19:56:01Z (video seconds 3307.5-3360.0)
2025-08-24 02:55:16,904 - INFO - Saved 24 transaction records to exports/20250824_025516_transactions.csv
2025-08-24 02:55:17,563 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22tx_range%22%2C%22meta%22%2C%22ended_at%22%2C%22started_at%22%2C%22kind%22%2C%22run_id%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-24 02:55:17,565 - INFO - Inserted transactions with IDs: ['b9338d2e-70ca-4e45-a187-a697b44c44e1', '1f9e720b-5c90-4e4f-9069-d48507667d52', 'aa6f6346-db88-4233-84bc-04cb7432b9ed', '372dbe4c-8720-4025-a7c9-e874f717d854', 'f5d58163-be73-4916-98b6-81ced1e05b0e', '62218a05-fd6c-4387-aebe-58517e2bb695', '8083251c-31d9-466a-a112-d04cac9c43ec', 'e2817e6c-e8d2-40d0-a144-bb6b4f10fc38', '4a699a90-a72e-44e0-a96a-b384817a4269', '00729d33-50dd-468b-a015-56053eed2e2f', '06c66a65-9a8f-41ad-abfa-241bfed54149', '10f1a264-8a59-40c4-a88d-e69ab1ee4b83', '076634d3-8a97-4476-99e2-0d68d3140564', '77885a1e-5ac9-4214-84ad-e37c817a3238', '4a3dd57d-be1b-489c-98b5-a2c8e4126d03', '41629705-32f8-44ba-b590-eea8a28fc9ad', '84595bce-b268-4845-8ebb-6e94d070e05b', '3a9cdd12-9279-4a53-a0a4-aab709c1b182', '3b0cc0da-c1ff-48d8-a22f-0ac11eb781a6', 'db926f30-8856-4228-96c1-b151a6260dfa', '426a78b7-82eb-4f76-a442-bbe42c4642dd', '6e718288-e595-4f4b-8270-0501d0bb71f0', '4cf27e2c-7d42-419b-b231-3af1fb93dca7', '55608f1a-332e-4d00-9b3c-d82ede48103f']
2025-08-24 02:55:17,565 - INFO - Starting grading for 24 transactions
2025-08-24 02:55:38,522 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:55:54,838 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:55:58,321 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:20,062 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:20,412 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:44,508 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:49,320 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:49,321 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:56:57,099 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:57:02,833 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:57:24,078 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:57:30,200 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:57:30,203 - INFO - Transaction splitting completed: 27 transactions identified
2025-08-24 02:57:30,203 - INFO - Uploading artifacts to S3 with prefix: deriv/session=ddc154a6-29bf-47fc-9060-5f0fafaf1044/
2025-08-24 02:57:30,610 - INFO - Artifacts uploaded to S3
2025-08-24 02:57:30,611 - INFO - Inserting 27 transactions into database
2025-08-24 02:57:30,611 - INFO - Transaction 1: 2025-08-17T17:00:01Z to 2025-08-17T17:01:16Z (video seconds 0.0-75.0)
2025-08-24 02:57:30,611 - INFO - Transaction 2: 2025-08-17T17:01:16Z to 2025-08-17T17:02:31Z (video seconds 75.0-150.0)
2025-08-24 02:57:30,611 - INFO - Transaction 3: 2025-08-17T17:03:46Z to 2025-08-17T17:05:16Z (video seconds 225.0-315.0)
2025-08-24 02:57:30,611 - INFO - Transaction 4: 2025-08-17T17:06:16Z to 2025-08-17T17:06:31Z (video seconds 375.0-390.0)
2025-08-24 02:57:30,611 - INFO - Transaction 5: 2025-08-17T17:06:46Z to 2025-08-17T17:07:53.500000Z (video seconds 405.0-472.5)
2025-08-24 02:57:30,611 - INFO - Transaction 6: 2025-08-17T17:07:53.500000Z to 2025-08-17T17:09:01Z (video seconds 472.5-540.0)
2025-08-24 02:57:30,612 - INFO - Transaction 7: 2025-08-17T17:09:46Z to 2025-08-17T17:11:08.500000Z (video seconds 585.0-667.5)
2025-08-24 02:57:30,612 - INFO - Transaction 8: 2025-08-17T17:11:08.500000Z to 2025-08-17T17:12:31Z (video seconds 667.5-750.0)
2025-08-24 02:57:30,612 - INFO - Transaction 9: 2025-08-17T17:19:31Z to 2025-08-17T17:20:21Z (video seconds 1170.0-1220.0)
2025-08-24 02:57:30,612 - INFO - Transaction 10: 2025-08-17T17:20:21Z to 2025-08-17T17:21:11Z (video seconds 1220.0-1270.0)
2025-08-24 02:57:30,612 - INFO - Transaction 11: 2025-08-17T17:21:11Z to 2025-08-17T17:22:01Z (video seconds 1270.0-1320.0)
2025-08-24 02:57:30,612 - INFO - Transaction 12: 2025-08-17T17:25:31Z to 2025-08-17T17:27:04.750000Z (video seconds 1530.0-1623.75)
2025-08-24 02:57:30,612 - INFO - Transaction 13: 2025-08-17T17:27:04.750000Z to 2025-08-17T17:28:38.500000Z (video seconds 1623.75-1717.5)
2025-08-24 02:57:30,612 - INFO - Transaction 14: 2025-08-17T17:28:38.500000Z to 2025-08-17T17:30:12.250000Z (video seconds 1717.5-1811.25)
2025-08-24 02:57:30,612 - INFO - Transaction 15: 2025-08-17T17:30:12.250000Z to 2025-08-17T17:31:46Z (video seconds 1811.25-1905.0)
2025-08-24 02:57:30,612 - INFO - Transaction 16: 2025-08-17T17:34:01Z to 2025-08-17T17:35:08.500000Z (video seconds 2040.0-2107.5)
2025-08-24 02:57:30,612 - INFO - Transaction 17: 2025-08-17T17:35:08.500000Z to 2025-08-17T17:36:16Z (video seconds 2107.5-2175.0)
2025-08-24 02:57:30,612 - INFO - Transaction 18: 2025-08-17T17:37:16Z to 2025-08-17T17:38:56Z (video seconds 2235.0-2335.0)
2025-08-24 02:57:30,612 - INFO - Transaction 19: 2025-08-17T17:38:56Z to 2025-08-17T17:40:36Z (video seconds 2335.0-2435.0)
2025-08-24 02:57:30,613 - INFO - Transaction 20: 2025-08-17T17:40:36Z to 2025-08-17T17:42:16Z (video seconds 2435.0-2535.0)
2025-08-24 02:57:30,613 - INFO - Transaction 21: 2025-08-17T17:42:46Z to 2025-08-17T17:43:46Z (video seconds 2565.0-2625.0)
2025-08-24 02:57:30,613 - INFO - Transaction 22: 2025-08-17T17:46:16Z to 2025-08-17T17:48:01Z (video seconds 2775.0-2880.0)
2025-08-24 02:57:30,613 - INFO - Transaction 23: 2025-08-17T17:48:31Z to 2025-08-17T17:51:01Z (video seconds 2910.0-3060.0)
2025-08-24 02:57:30,613 - INFO - Transaction 24: 2025-08-17T17:52:31Z to 2025-08-17T17:53:42.250000Z (video seconds 3150.0-3221.25)
2025-08-24 02:57:30,613 - INFO - Transaction 25: 2025-08-17T17:53:42.250000Z to 2025-08-17T17:54:53.500000Z (video seconds 3221.25-3292.5)
2025-08-24 02:57:30,613 - INFO - Transaction 26: 2025-08-17T17:54:53.500000Z to 2025-08-17T17:56:04.750000Z (video seconds 3292.5-3363.75)
2025-08-24 02:57:30,613 - INFO - Transaction 27: 2025-08-17T17:56:04.750000Z to 2025-08-17T17:57:16Z (video seconds 3363.75-3435.0)
2025-08-24 02:57:30,615 - INFO - Saved 27 transaction records to exports/20250824_025730_transactions.csv
2025-08-24 02:57:31,403 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22meta%22%2C%22kind%22%2C%22ended_at%22%2C%22started_at%22%2C%22run_id%22%2C%22tx_range%22%2C%22video_id%22 "HTTP/2 201 Created"
2025-08-24 02:57:31,407 - INFO - Inserted transactions with IDs: ['c167924b-6134-4d82-a2cb-3a47ec6e6ec7', 'c2637128-e0ab-4758-aa6e-6082cff77d78', 'b691cef9-feed-4b36-8075-e43fc91c96bd', '43cf52ce-757c-4e19-9ad9-fb1f669262e4', '50aa0d1b-9be6-4f2f-81eb-e8501e178ccf', 'a34d0b74-099e-42e0-8ac4-782cf6d35238', '6745f6b1-c59e-4445-b8c4-55338b39ae5a', '35205992-a106-436e-99ce-41c84ace608d', '7efb7a02-6121-47d8-ade6-20a1109839f9', '2f391eac-c842-4a1c-86a0-70a237c7f6c9', '2829ba14-63cc-42e0-9813-84af1df675de', '15fe6fa8-a5bb-41ed-b3ee-39a5344af24e', '4a20c34e-8244-4ad8-9a6b-82d80e27d644', '75aa2059-aca5-4700-974a-5d4e4efa78ae', '5c6f60f7-c4a3-443c-a282-e261d82e0434', 'abb155c8-7235-447b-8d90-2ca8dcea3630', '7af52463-ee49-4f42-863c-a2b32ccd6817', '0637b707-c7a4-4af8-9ace-a25f682e8c59', 'e826b4c7-10f0-43b2-84b2-3f6345689140', '5693d5ed-cf61-48fe-abde-7ef7ab56d62f', 'a15d1c42-1a89-47a6-9a2e-6401700925f4', '20bc36fa-bcbc-40b4-aa9b-1ab8b2c72315', '99ee48a4-81a2-4009-a3d1-538c5e92b412', '001255a8-d2c2-457e-bab5-0fbb8ac78350', '09222f80-b723-461a-8de6-dc7642ad43af', '2fde6bba-4d3e-40e2-932f-90181b61ff41', '9b93efaa-03fb-4fb7-81e0-a1923ac0bf5f']
2025-08-24 02:57:31,407 - INFO - Starting grading for 27 transactions
2025-08-24 02:57:51,888 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:57:59,877 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:58:12,971 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:58:37,136 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:58:43,974 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:05,249 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:05,899 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:20,469 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:21,592 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:45,885 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 02:59:46,093 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:00:18,578 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:00:27,336 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:00:33,275 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:00:59,182 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:00:59,257 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:01:20,670 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:01:39,599 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:01:54,036 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:01,065 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:06,760 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:27,704 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:28,309 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:55,158 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:02:59,763 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:03:24,163 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:03:54,019 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:04:15,386 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:04:26,529 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:04:45,691 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:04:46,328 - INFO - Grading completed and uploaded to S3
2025-08-24 03:04:46,328 - INFO - Upserting grades for 24 transactions
2025-08-24 03:04:46,333 - INFO - Saved 24 grade records to exports/20250824_030446_grades.csv
2025-08-24 03:04:47,170 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22out_of_stock_items%22%2C%22reasoning_summary%22%2C%22score%22%2C%22num_upsell_opportunities%22%2C%22num_items_initial%22%2C%22upsell_offered%22%2C%22upsize_possible%22%2C%22items_upsold%22%2C%22transaction_id%22%2C%22num_items_after%22%2C%22items_upsizeable%22%2C%22num_addon_opportunities%22%2C%22details%22%2C%22items_upsellable%22%2C%22items_upsize_success%22%2C%22video_file_path%22%2C%22num_upsize_opportunities%22%2C%22gpt_price%22%2C%22num_addon_offers%22%2C%22video_link%22%2C%22items_addon_success%22%2C%22num_upsell_success%22%2C%22num_addon_success%22%2C%22complete_order%22%2C%22items_addonable%22%2C%22mobile_order%22%2C%22upsize_offered%22%2C%22num_upsell_offers%22%2C%22items_after%22%2C%22transcript%22%2C%22coupon_used%22%2C%22num_largest_offers%22%2C%22issues%22%2C%22upsell_possible%22%2C%22num_upsize_offers%22%2C%22num_upsize_success%22%2C%22items_initial%22%2C%22asked_more_time%22%2C%22feedback%22 "HTTP/2 201 Created"
2025-08-24 03:04:47,175 - INFO - Successfully completed all processing steps for video f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 03:04:48,943 - INFO - Cleaned up temporary files for video f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 03:04:49,134 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.f40e1720-e979-4898-98c7-4dbf7b22387d "HTTP/2 200 OK"
2025-08-24 03:04:49,135 - INFO - ✅ Successfully processed video f40e1720-e979-4898-98c7-4dbf7b22387d in 1092.10 seconds
2025-08-24 03:04:49,403 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:04:49,405 - INFO - No more uploaded videos found in queue.
2025-08-24 03:04:49,405 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-24 03:04:49,405 - INFO - Processed video IDs: f40e1720-e979-4898-98c7-4dbf7b22387d
2025-08-24 03:04:49,405 - INFO - === Batch session completed in 1092.95 seconds ===
2025-08-24 03:06:55,209 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:07:29,860 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:07:53,435 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:08:26,225 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:09:04,656 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:09:52,847 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:10:53,168 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:11:20,231 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:12:05,589 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:12:29,449 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:13:00,824 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:13:35,355 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:13:55,834 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:14:30,184 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:15:05,279 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:15:55,705 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:15:56,237 - INFO - Grading completed and uploaded to S3
2025-08-24 03:15:56,237 - INFO - Upserting grades for 27 transactions
2025-08-24 03:15:56,241 - INFO - Saved 27 grade records to exports/20250824_031556_grades.csv
2025-08-24 03:15:57,019 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22items_upsold%22%2C%22num_upsell_opportunities%22%2C%22items_upsize_success%22%2C%22video_file_path%22%2C%22num_upsell_success%22%2C%22transcript%22%2C%22coupon_used%22%2C%22num_addon_success%22%2C%22num_items_initial%22%2C%22complete_order%22%2C%22num_items_after%22%2C%22num_upsell_offers%22%2C%22video_link%22%2C%22transaction_id%22%2C%22upsize_offered%22%2C%22upsell_offered%22%2C%22num_upsize_opportunities%22%2C%22num_addon_opportunities%22%2C%22items_upsellable%22%2C%22gpt_price%22%2C%22feedback%22%2C%22items_addonable%22%2C%22score%22%2C%22reasoning_summary%22%2C%22items_after%22%2C%22num_upsize_offers%22%2C%22items_initial%22%2C%22asked_more_time%22%2C%22num_largest_offers%22%2C%22upsize_possible%22%2C%22mobile_order%22%2C%22upsell_possible%22%2C%22num_addon_offers%22%2C%22items_upsizeable%22%2C%22issues%22%2C%22items_addon_success%22%2C%22out_of_stock_items%22%2C%22num_upsize_success%22%2C%22details%22 "HTTP/2 201 Created"
2025-08-24 03:15:57,022 - INFO - Successfully completed all processing steps for video ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 03:15:58,383 - INFO - Cleaned up temporary files for video ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 03:15:58,575 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.ddc154a6-29bf-47fc-9060-5f0fafaf1044 "HTTP/2 200 OK"
2025-08-24 03:15:58,576 - INFO - ✅ Successfully processed video ddc154a6-29bf-47fc-9060-5f0fafaf1044 in 1761.76 seconds
2025-08-24 03:15:58,728 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:15:58,730 - INFO - No more uploaded videos found in queue.
2025-08-24 03:15:58,731 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-24 03:15:58,731 - INFO - Processed video IDs: ddc154a6-29bf-47fc-9060-5f0fafaf1044
2025-08-24 03:15:58,731 - INFO - === Batch session completed in 1762.83 seconds ===
2025-08-24 03:17:15,354 - INFO - OpenAI API key found
2025-08-24 03:17:15,354 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:15,354 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:15,354 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:15,371 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:15,446 - INFO - Successfully connected to database and S3
2025-08-24 03:17:15,813 - INFO - OpenAI API key found
2025-08-24 03:17:15,814 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:15,814 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:15,814 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:15,830 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:15,864 - INFO - Successfully connected to database and S3
2025-08-24 03:17:16,887 - INFO - OpenAI API key found
2025-08-24 03:17:16,887 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:16,887 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:16,887 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:16,903 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:16,938 - INFO - Successfully connected to database and S3
2025-08-24 03:17:17,775 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:17,777 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:17,777 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:17,777 - INFO - === Batch session completed in 2.42 seconds ===
2025-08-24 03:17:17,793 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:17,796 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:17,796 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:17,796 - INFO - === Batch session completed in 1.98 seconds ===
2025-08-24 03:17:17,830 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:17,833 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:17,833 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:17,833 - INFO - === Batch session completed in 0.95 seconds ===
2025-08-24 03:17:17,873 - INFO - OpenAI API key found
2025-08-24 03:17:17,873 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:17,873 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:17,873 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:17,892 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:17,936 - INFO - Successfully connected to database and S3
2025-08-24 03:17:18,079 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:18,081 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:18,081 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:18,081 - INFO - === Batch session completed in 0.21 seconds ===
2025-08-24 03:17:18,835 - INFO - OpenAI API key found
2025-08-24 03:17:18,835 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:18,835 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:18,835 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:18,851 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:18,886 - INFO - Successfully connected to database and S3
2025-08-24 03:17:19,096 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:19,104 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:19,104 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:19,105 - INFO - === Batch session completed in 0.27 seconds ===
2025-08-24 03:17:55,575 - INFO - OpenAI API key found
2025-08-24 03:17:55,575 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:55,575 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:55,575 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:55,592 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:55,637 - INFO - Successfully connected to database and S3
2025-08-24 03:17:55,877 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:55,880 - INFO - Found video to process - ID: c3ad8372-41bf-430d-9206-bc2df059f917, S3 Key: dev/sample/DT_File20250817180001000.avi
2025-08-24 03:17:55,880 - INFO - Attempting to claim video c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 03:17:55,993 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c3ad8372-41bf-430d-9206-bc2df059f917&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 03:17:55,993 - INFO - Successfully claimed video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:17:55,993 - INFO - Starting video processing for c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 03:17:55,993 - INFO - Starting video processing pipeline for c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:17:56,004 - INFO - Downloading video c3ad8372-41bf-430d-9206-bc2df059f917 from S3: dev/sample/DT_File20250817180001000.avi
2025-08-24 03:17:56,341 - INFO - OpenAI API key found
2025-08-24 03:17:56,341 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:56,341 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:56,342 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:56,357 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:56,392 - INFO - Successfully connected to database and S3
2025-08-24 03:17:56,532 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:56,536 - INFO - Found video to process - ID: c597c72f-b3cd-48ac-8413-8251a40ce880, S3 Key: dev/sample/DT_File20250817200001000.avi
2025-08-24 03:17:56,536 - INFO - Attempting to claim video c597c72f-b3cd-48ac-8413-8251a40ce880...
2025-08-24 03:17:56,610 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c597c72f-b3cd-48ac-8413-8251a40ce880&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 03:17:56,611 - INFO - Successfully claimed video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:17:56,611 - INFO - Starting video processing for c597c72f-b3cd-48ac-8413-8251a40ce880...
2025-08-24 03:17:56,611 - INFO - Starting video processing pipeline for c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:17:56,611 - INFO - Downloading video c597c72f-b3cd-48ac-8413-8251a40ce880 from S3: dev/sample/DT_File20250817200001000.avi
2025-08-24 03:17:57,340 - INFO - OpenAI API key found
2025-08-24 03:17:57,340 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:57,340 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:57,340 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:57,357 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:57,391 - INFO - Successfully connected to database and S3
2025-08-24 03:17:57,521 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:57,525 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:57,525 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:57,525 - INFO - === Batch session completed in 0.18 seconds ===
2025-08-24 03:17:58,376 - INFO - OpenAI API key found
2025-08-24 03:17:58,376 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:58,376 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:58,376 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:58,414 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:58,500 - INFO - Successfully connected to database and S3
2025-08-24 03:17:58,987 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:58,990 - INFO - No more uploaded videos found in queue.
2025-08-24 03:17:58,990 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:17:58,990 - INFO - === Batch session completed in 0.61 seconds ===
2025-08-24 03:17:59,358 - INFO - OpenAI API key found
2025-08-24 03:17:59,358 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:59,358 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:59,358 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:59,375 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:59,409 - INFO - Successfully connected to database and S3
2025-08-24 03:18:00,731 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:18:00,741 - INFO - No more uploaded videos found in queue.
2025-08-24 03:18:00,741 - INFO - Batch complete. Succeeded: 0, Failed: 0, Total: 0
2025-08-24 03:18:00,741 - INFO - === Batch session completed in 1.38 seconds ===
2025-08-24 03:23:28,680 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_vcuay0ft/input.mp4
2025-08-24 03:23:28,681 - INFO - Starting transcription for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:23:28,894 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_m04rj4ko/input.mp4
2025-08-24 03:23:28,894 - INFO - Starting transcription for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:24:00,537 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:04,056 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:07,410 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:11,316 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:15,580 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:18,156 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:19,315 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:20,951 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:27,331 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:31,844 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:37,988 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:38,916 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:46,898 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:50,310 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:54,516 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:57,227 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:58,741 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:59,940 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:02,488 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:04,401 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:10,360 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:13,050 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:13,082 - INFO - Transcription completed: 13 segments generated
2025-08-24 03:25:13,082 - INFO - Starting transaction splitting for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:25:21,127 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:25:27,198 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:25:33,306 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:38,544 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:25:39,297 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:41,792 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:25:42,292 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:45,804 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:45,837 - INFO - Transcription completed: 13 segments generated
2025-08-24 03:25:45,837 - INFO - Starting transaction splitting for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:25:54,727 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:26:08,011 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:26:11,742 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:26:48,809 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:26:53,024 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:10,814 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:15,740 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:23,526 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:37,186 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:47,966 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:48,228 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:48,231 - INFO - Transaction splitting completed: 21 transactions identified
2025-08-24 03:27:48,232 - INFO - Uploading artifacts to S3 with prefix: deriv/session=c597c72f-b3cd-48ac-8413-8251a40ce880/
2025-08-24 03:27:49,284 - INFO - Artifacts uploaded to S3
2025-08-24 03:27:49,285 - INFO - Inserting 21 transactions into database
2025-08-24 03:27:49,285 - INFO - Transaction 1: 2025-08-17T20:00:01Z to 2025-08-17T20:01:31Z (video seconds 0.0-90.0)
2025-08-24 03:27:49,285 - INFO - Transaction 2: 2025-08-17T20:10:31Z to 2025-08-17T20:11:31Z (video seconds 630.0-690.0)
2025-08-24 03:27:49,285 - INFO - Transaction 3: 2025-08-17T20:12:01Z to 2025-08-17T20:12:31Z (video seconds 720.0-750.0)
2025-08-24 03:27:49,285 - INFO - Transaction 4: 2025-08-17T20:12:31Z to 2025-08-17T20:13:01Z (video seconds 750.0-780.0)
2025-08-24 03:27:49,285 - INFO - Transaction 5: 2025-08-17T20:15:01Z to 2025-08-17T20:16:01Z (video seconds 900.0-960.0)
2025-08-24 03:27:49,285 - INFO - Transaction 6: 2025-08-17T20:21:16Z to 2025-08-17T20:22:46Z (video seconds 1275.0-1365.0)
2025-08-24 03:27:49,286 - INFO - Transaction 7: 2025-08-17T20:26:01Z to 2025-08-17T20:27:01Z (video seconds 1560.0-1620.0)
2025-08-24 03:27:49,286 - INFO - Transaction 8: 2025-08-17T20:29:16Z to 2025-08-17T20:30:01Z (video seconds 1755.0-1800.0)
2025-08-24 03:27:49,286 - INFO - Transaction 9: 2025-08-17T20:31:16Z to 2025-08-17T20:32:06Z (video seconds 1875.0-1925.0)
2025-08-24 03:27:49,286 - INFO - Transaction 10: 2025-08-17T20:32:06Z to 2025-08-17T20:32:56Z (video seconds 1925.0-1975.0)
2025-08-24 03:27:49,286 - INFO - Transaction 11: 2025-08-17T20:32:56Z to 2025-08-17T20:33:46Z (video seconds 1975.0-2025.0)
2025-08-24 03:27:49,286 - INFO - Transaction 12: 2025-08-17T20:34:31Z to 2025-08-17T20:41:16Z (video seconds 2070.0-2475.0)
2025-08-24 03:27:49,286 - INFO - Transaction 13: 2025-08-17T20:43:46Z to 2025-08-17T20:45:11Z (video seconds 2625.0-2710.0)
2025-08-24 03:27:49,286 - INFO - Transaction 14: 2025-08-17T20:45:11Z to 2025-08-17T20:46:36Z (video seconds 2710.0-2795.0)
2025-08-24 03:27:49,286 - INFO - Transaction 15: 2025-08-17T20:46:36Z to 2025-08-17T20:48:01Z (video seconds 2795.0-2880.0)
2025-08-24 03:27:49,286 - INFO - Transaction 16: 2025-08-17T20:48:31Z to 2025-08-17T20:49:46Z (video seconds 2910.0-2985.0)
2025-08-24 03:27:49,286 - INFO - Transaction 17: 2025-08-17T20:50:31Z to 2025-08-17T20:55:01Z (video seconds 3030.0-3300.0)
2025-08-24 03:27:49,286 - INFO - Transaction 18: 2025-08-17T20:56:31Z to 2025-08-17T20:57:23.217500Z (video seconds 3390.0-3442.2174999999997)
2025-08-24 03:27:49,286 - INFO - Transaction 19: 2025-08-17T20:57:23.217500Z to 2025-08-17T20:58:15.435000Z (video seconds 3442.2174999999997-3494.435)
2025-08-24 03:27:49,286 - INFO - Transaction 20: 2025-08-17T20:58:15.435000Z to 2025-08-17T20:59:07.652500Z (video seconds 3494.435-3546.6525)
2025-08-24 03:27:49,287 - INFO - Transaction 21: 2025-08-17T20:59:07.652500Z to 2025-08-17T20:59:59.870000Z (video seconds 3546.6525-3598.87)
2025-08-24 03:27:49,289 - INFO - Saved 21 transaction records to exports/20250824_032749_transactions.csv
2025-08-24 03:27:50,004 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22video_id%22%2C%22tx_range%22%2C%22meta%22%2C%22kind%22%2C%22started_at%22%2C%22ended_at%22%2C%22run_id%22 "HTTP/2 201 Created"
2025-08-24 03:27:50,006 - INFO - Inserted transactions with IDs: ['7badbb7d-f434-4d87-b400-1bd86c73788d', 'e59a91dc-4f35-4f20-9ee5-4b6934833ec0', '0fd49604-3b74-425d-ad7f-741abdac2f6f', 'e9e548b9-0305-4a7f-9cbd-3fd6db7b8bfa', '9155c62b-3693-4329-b1d1-cd1aa8df4a92', '3530481e-c088-44eb-9980-419d4b4a3050', 'de2aba83-3d32-46e5-ae39-d49dae5145b1', '7dbb4ee3-ecea-4918-b9d6-d30d54ee4de3', 'fad656db-7508-4ada-9994-14f4d06c0fbc', '282c7fed-9d36-4aad-b6f4-808761f71fbf', 'f577b40c-af0a-4dfa-a267-df91a01ac10b', '9a014f61-6ae2-4878-aade-c39d985dfd1c', '257aa447-50d6-4136-afd5-3588b93d9092', 'ed014aec-f313-4fb9-9766-dc8bab5de8f3', '16d69293-1f96-4b78-84d2-8adb4ac8c74f', 'b94f7773-0638-4e21-b081-dc7a314035de', 'afdbb338-1199-4e57-9f58-660c9da297b9', 'c30bb333-b903-4461-9dec-9636a58e0aa6', '18c3bdf2-9396-4c63-a096-9e6d48b60bf6', 'af38615d-c15c-46ae-9bf3-ceddab9a4eba', '3125b5e9-f25d-4d51-8445-4abc01e6c544']
2025-08-24 03:27:50,006 - INFO - Starting grading for 21 transactions
2025-08-24 03:28:03,230 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:05,848 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:20,980 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:24,909 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:27,499 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:30,963 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:37,067 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:44,012 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:47,802 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:29:05,344 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:29:46,727 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:30:03,042 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:30:42,378 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:30:48,166 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:30:57,871 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:00,311 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:08,092 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:18,288 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:19,309 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:19,310 - INFO - Transaction splitting completed: 15 transactions identified
2025-08-24 03:31:19,310 - INFO - Uploading artifacts to S3 with prefix: deriv/session=c3ad8372-41bf-430d-9206-bc2df059f917/
2025-08-24 03:31:19,797 - INFO - Artifacts uploaded to S3
2025-08-24 03:31:19,797 - INFO - Inserting 15 transactions into database
2025-08-24 03:31:19,798 - INFO - Transaction 1: 2025-08-17T18:05:31Z to 2025-08-17T18:08:46Z (video seconds 330.0-525.0)
2025-08-24 03:31:19,798 - INFO - Transaction 2: 2025-08-17T18:09:16Z to 2025-08-17T18:15:16Z (video seconds 555.0-915.0)
2025-08-24 03:31:19,798 - INFO - Transaction 3: 2025-08-17T18:16:16Z to 2025-08-17T18:17:23.500000Z (video seconds 975.0-1042.5)
2025-08-24 03:31:19,798 - INFO - Transaction 4: 2025-08-17T18:17:23.500000Z to 2025-08-17T18:18:31Z (video seconds 1042.5-1110.0)
2025-08-24 03:31:19,798 - INFO - Transaction 5: 2025-08-17T18:19:31Z to 2025-08-17T18:21:01Z (video seconds 1170.0-1260.0)
2025-08-24 03:31:19,798 - INFO - Transaction 6: 2025-08-17T18:21:01Z to 2025-08-17T18:22:31Z (video seconds 1260.0-1350.0)
2025-08-24 03:31:19,799 - INFO - Transaction 7: 2025-08-17T18:25:31Z to 2025-08-17T18:33:01Z (video seconds 1530.0-1980.0)
2025-08-24 03:31:19,799 - INFO - Transaction 8: 2025-08-17T18:34:31Z to 2025-08-17T18:34:46Z (video seconds 2070.0-2085.0)
2025-08-24 03:31:19,799 - INFO - Transaction 9: 2025-08-17T18:35:01Z to 2025-08-17T18:35:31Z (video seconds 2100.0-2130.0)
2025-08-24 03:31:19,799 - INFO - Transaction 10: 2025-08-17T18:35:46Z to 2025-08-17T18:36:46Z (video seconds 2145.0-2205.0)
2025-08-24 03:31:19,799 - INFO - Transaction 11: 2025-08-17T18:37:01Z to 2025-08-17T18:41:01Z (video seconds 2220.0-2460.0)
2025-08-24 03:31:19,799 - INFO - Transaction 12: 2025-08-17T18:43:46Z to 2025-08-17T18:48:01Z (video seconds 2625.0-2880.0)
2025-08-24 03:31:19,799 - INFO - Transaction 13: 2025-08-17T18:48:46Z to 2025-08-17T18:50:31Z (video seconds 2925.0-3030.0)
2025-08-24 03:31:19,799 - INFO - Transaction 14: 2025-08-17T18:53:31Z to 2025-08-17T18:54:31Z (video seconds 3210.0-3270.0)
2025-08-24 03:31:19,799 - INFO - Transaction 15: 2025-08-17T18:58:31Z to 2025-08-17T18:59:31Z (video seconds 3510.0-3570.0)
2025-08-24 03:31:19,802 - INFO - Saved 15 transaction records to exports/20250824_033119_transactions.csv
2025-08-24 03:31:20,153 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22meta%22%2C%22video_id%22%2C%22tx_range%22%2C%22ended_at%22%2C%22kind%22%2C%22run_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-24 03:31:20,160 - INFO - Inserted transactions with IDs: ['6f0140d1-c808-41c4-9625-e0500cbbba13', 'd6d56a8d-bba4-4a48-a8b6-053fe58844ca', 'd53d3253-f439-4213-9f6a-23c4a1d9fe06', 'e2afa86f-7120-426c-b1e7-212b03681eca', '89ff7671-cb89-432a-a66e-d66e94cccfe0', 'b46d32e4-0562-4edd-9028-4067e7352db3', 'f8371685-e679-4cc6-ba57-418b134508c7', 'f46dd795-aebd-4eac-8779-f593f9d2227f', '35b9206e-b411-4335-86a9-525f77cc2d59', 'a10b730d-8459-4cc2-9d7e-7b893511b645', '9d4736b3-5101-4c67-b142-76816fe555b9', '767583b5-2ba4-41dd-9351-d81d8acc07f9', '09c0aaf0-35ab-4f0d-a7d8-bfdd0f505ce1', '61f0e272-da6b-4bfd-877c-c15e118bb146', '005eb957-ea4d-4fe1-8eb8-958595cc89dc']
2025-08-24 03:31:20,161 - INFO - Starting grading for 15 transactions
2025-08-24 03:31:34,292 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:37,054 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:55,154 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:32:03,644 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:32:13,179 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:32:30,561 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:32:37,516 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:33:17,694 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:33:19,220 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:33:56,370 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:34:16,853 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:34:23,720 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:34:53,680 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:34:59,844 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:13,713 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:20,173 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:29,132 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:37,660 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:52,700 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:54,431 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:36:21,052 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:36:35,290 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:36:47,451 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:37:05,015 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:37:05,612 - INFO - Grading completed and uploaded to S3
2025-08-24 03:37:05,612 - INFO - Upserting grades for 21 transactions
2025-08-24 03:37:05,617 - INFO - Saved 21 grade records to exports/20250824_033705_grades.csv
2025-08-24 03:37:06,329 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22num_items_initial%22%2C%22upsize_possible%22%2C%22score%22%2C%22num_largest_offers%22%2C%22reasoning_summary%22%2C%22video_file_path%22%2C%22num_upsell_success%22%2C%22upsell_offered%22%2C%22mobile_order%22%2C%22complete_order%22%2C%22out_of_stock_items%22%2C%22num_upsize_offers%22%2C%22transaction_id%22%2C%22num_upsell_offers%22%2C%22num_upsize_opportunities%22%2C%22num_items_after%22%2C%22transcript%22%2C%22coupon_used%22%2C%22items_after%22%2C%22items_addon_success%22%2C%22feedback%22%2C%22details%22%2C%22issues%22%2C%22num_addon_opportunities%22%2C%22gpt_price%22%2C%22upsize_offered%22%2C%22num_addon_success%22%2C%22upsell_possible%22%2C%22num_upsize_success%22%2C%22items_upsizeable%22%2C%22items_addonable%22%2C%22items_upsellable%22%2C%22video_link%22%2C%22asked_more_time%22%2C%22items_initial%22%2C%22items_upsold%22%2C%22num_upsell_opportunities%22%2C%22num_addon_offers%22%2C%22items_upsize_success%22 "HTTP/2 201 Created"
2025-08-24 03:37:06,332 - INFO - Successfully completed all processing steps for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:37:07,916 - INFO - Cleaned up temporary files for video c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:37:08,088 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c597c72f-b3cd-48ac-8413-8251a40ce880 "HTTP/2 200 OK"
2025-08-24 03:37:08,089 - INFO - ✅ Successfully processed video c597c72f-b3cd-48ac-8413-8251a40ce880 in 1151.31 seconds
2025-08-24 03:37:08,329 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:37:08,330 - INFO - No more uploaded videos found in queue.
2025-08-24 03:37:08,330 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-24 03:37:08,330 - INFO - Processed video IDs: c597c72f-b3cd-48ac-8413-8251a40ce880
2025-08-24 03:37:08,330 - INFO - === Batch session completed in 1151.99 seconds ===
2025-08-24 03:37:34,883 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:10,834 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:32,728 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:52,462 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:52,782 - INFO - Grading completed and uploaded to S3
2025-08-24 03:38:52,782 - INFO - Upserting grades for 15 transactions
2025-08-24 03:38:52,786 - INFO - Saved 15 grade records to exports/20250824_033852_grades.csv
2025-08-24 03:38:53,322 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22score%22%2C%22num_upsell_offers%22%2C%22num_addon_opportunities%22%2C%22num_upsize_offers%22%2C%22out_of_stock_items%22%2C%22items_upsellable%22%2C%22num_upsell_opportunities%22%2C%22num_items_initial%22%2C%22num_addon_success%22%2C%22mobile_order%22%2C%22items_upsize_success%22%2C%22upsize_possible%22%2C%22upsell_possible%22%2C%22items_after%22%2C%22upsize_offered%22%2C%22num_upsell_success%22%2C%22coupon_used%22%2C%22upsell_offered%22%2C%22num_addon_offers%22%2C%22reasoning_summary%22%2C%22items_addonable%22%2C%22items_initial%22%2C%22num_upsize_success%22%2C%22num_upsize_opportunities%22%2C%22video_file_path%22%2C%22num_items_after%22%2C%22issues%22%2C%22complete_order%22%2C%22num_largest_offers%22%2C%22items_upsizeable%22%2C%22gpt_price%22%2C%22details%22%2C%22video_link%22%2C%22items_upsold%22%2C%22items_addon_success%22%2C%22feedback%22%2C%22transaction_id%22%2C%22transcript%22%2C%22asked_more_time%22 "HTTP/2 201 Created"
2025-08-24 03:38:53,324 - INFO - Successfully completed all processing steps for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,424 - INFO - Cleaned up temporary files for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,521 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c3ad8372-41bf-430d-9206-bc2df059f917 "HTTP/2 200 OK"
2025-08-24 03:38:54,522 - INFO - ✅ Successfully processed video c3ad8372-41bf-430d-9206-bc2df059f917 in 1258.43 seconds
2025-08-24 03:38:54,906 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:38:54,907 - INFO - No more uploaded videos found in queue.
2025-08-24 03:38:54,907 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-24 03:38:54,908 - INFO - Processed video IDs: c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,908 - INFO - === Batch session completed in 1259.33 seconds ===
