2025-08-24 03:17:55,575 - INFO - OpenAI API key found
2025-08-24 03:17:55,575 - INFO - Loaded environment variables - AWS Region: us-east-2
2025-08-24 03:17:55,575 - INFO - === Starting batch video processing (process all 'uploaded') ===
2025-08-24 03:17:55,575 - INFO - Initializing database and S3 connections...
2025-08-24 03:17:55,592 - INFO - Found credentials in shared credentials file: ~/.aws/credentials
2025-08-24 03:17:55,637 - INFO - Successfully connected to database and S3
2025-08-24 03:17:55,877 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:17:55,880 - INFO - Found video to process - ID: c3ad8372-41bf-430d-9206-bc2df059f917, S3 Key: dev/sample/DT_File20250817180001000.avi
2025-08-24 03:17:55,880 - INFO - Attempting to claim video c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 03:17:55,993 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c3ad8372-41bf-430d-9206-bc2df059f917&status=eq.uploaded "HTTP/2 200 OK"
2025-08-24 03:17:55,993 - INFO - Successfully claimed video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:17:55,993 - INFO - Starting video processing for c3ad8372-41bf-430d-9206-bc2df059f917...
2025-08-24 03:17:55,993 - INFO - Starting video processing pipeline for c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:17:56,004 - INFO - Downloading video c3ad8372-41bf-430d-9206-bc2df059f917 from S3: dev/sample/DT_File20250817180001000.avi
2025-08-24 03:23:28,894 - INFO - Downloaded video to: /var/folders/pl/7l52nm4d7zgdj2mnsccc2yyw0000gn/T/hoptix_m04rj4ko/input.mp4
2025-08-24 03:23:28,894 - INFO - Starting transcription for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:24:19,315 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:31,844 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:38,916 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:46,898 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:57,227 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:58,741 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:24:59,940 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:02,488 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:10,360 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:33,306 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:39,297 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:42,292 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:45,804 - INFO - HTTP Request: POST https://api.openai.com/v1/audio/transcriptions "HTTP/1.1 200 OK"
2025-08-24 03:25:45,837 - INFO - Transcription completed: 13 segments generated
2025-08-24 03:25:45,837 - INFO - Starting transaction splitting for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:27:37,186 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:27:47,966 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Using video timestamp from filename: 2025-08-17T18:00:01Z

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Operator: 
Customer: 
Op...
Raw LLM response: {"1": "Operator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator:\nCustomer:\nOperator", "2": "0", "3": "0", "4": "0", "5": "0", "6": "0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: If you have any questions on the menu, order when you're ready.

Customer: Yeah, still looking, thank you.

Customer: We'll start with a small Blizzard of the Month.

Operator: Okay, which o...
2025-08-24 03:28:03,230 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:20,980 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:24,909 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:27,499 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:30,963 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:37,067 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:28:44,012 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:30:48,166 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Raw LLM response: {"1":"Operator: If you have any questions on the menu, order when you're ready.\nCustomer: Yeah, still looking, thank you.\nCustomer: We'll start with a small Blizzard of the Month.\nOperator: Okay, which one, the Superman?\nCustomer: The Caramel Craze.\nOperator: Okay, small Reese's Caramel Craze. Did you want a little extra Reese's peanut butter cups in there? Makes it really good.\nCustomer: We'll take that, and yeah.\nOperator: Okay.\nCustomer: And then we'll have a small Butterfinger Blizzard.\nOperator: Small Butterfinger, a little extra Butterfinger in there?\nCustomer: Yeah, like double or triple.\nOperator: We'll do triple, it's better that way.\nCustomer: Yeah, it is.\nOperator: Okay, and then we have our soft pretzel sticks with queso for $3.89 if you want a little food side snack with that today.\nCustomer: I think we're good with just the Blizzard.\nOperator: Okay, will that do it for you?\nCustomer: That is it.\nOperator: $14.78 at the window, thank you.\nCustomer: Thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Looks like a small Oreo cookie blizzard. Customer: Oreo, do you want a little extra Oreo in that? It makes it really good. Operator: Sure. Customer: And we do have our soft pretzel sticks wi...
Raw LLM response: {"1":"Operator: Looks like a small Oreo cookie blizzard.\nCustomer: Oreo, do you want a little extra Oreo in that? It makes it really good.\nOperator: Sure.\nCustomer: And we do have our soft pretzel sticks with queso for $3.89 if you need a little food option with that today.\nOperator: No, thank you.\nCustomer: Anything else for you today?\nOperator: That'll be it.\nCustomer: $6.96 to the window, thank you.\nOperator: No, thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}@#&{"1":"Customer: Okay, we're ready.\nOperator: Order when you're ready.\nCustomer: Okay, thank you. Can we have the brownie and Oreo confection?\nOperator: The brownie Oreo confection, did you want a little extra Oreo in there? It makes it really good.\nCustomer: Yes, please, thank you. And then can we have a small chocolate cone double dipped in chocolate?\nOperator: Sure. So a small chocolate cone dipped in chocolate and then double dipped, okay?\nCustomer: Yeah, that's it.\nOperator: We do have our soft pretzel sticks with queso today for $3.89 if you need a food option today.\nCustomer: No, I'm good, thank you. I will take a small Diet Coke.\nOperator: Small Diet Coke, okay.\nCustomer: Okay, that's all, thank you.\nOperator: Your total is going to be $16.30 at the window, thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Large vanilla cone?

Operator: What was that? Large vanilla cone?

Operator: Did you want that dipped in sprinkles?

Operator: Yes sir, I can hardly hear you, sorry.

Operator: No, okay. Lar...
Raw LLM response: {"1":"Operator: Large vanilla cone?\nOperator: What was that? Large vanilla cone?\nOperator: Did you want that dipped in sprinkles?\nOperator: Yes sir, I can hardly hear you, sorry.\nOperator: No, okay. Large vanilla cone. Anything else for you? I've got soft pretzel sticks with queso for $3.89 if you need a food option to go with that.\nOperator: Just the cone then?\nOperator: $4.90 at the window, thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}@#&{"1":"Operator: All cherry dipped cones, do you want them double dipped in cherry because it keeps them colder longer in this hot weather?\nOperator: Yep.\nOperator: Okay, it doesn't melt as fast also. And we do have our soft pretzel sticks with queso for $3.89 if you need a food item to go with it.\nOperator: Anything else for you?\nOperator: And a small vanilla cone?\nOperator: And what else for you?\nOperator: Okay, so the two cherry dipped cones double dipped and the small vanilla cone.\nOperator: $14.01 at the window, thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Do you want some extra peanut butter cups in there?
...
Raw LLM response: {"1":"Operator: Do you want some extra peanut butter cups in there?","2":"0","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator:
...
Raw LLM response: {"1":"Operator:","2":"0","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: When you're ready.
...
Raw LLM response: {"1": "Operator: When you're ready.", "2": "0", "3": "0", "4": "0", "5": "0", "6": "0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: I just dropped it. Hold on.
...
Raw LLM response: {"1": "Operator: I just dropped it. Hold on.", "2": "0", "3": "0", "4": "0", "5": "1", "6": "0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Are you ready?
Customer: Yeah.
Operator: Two chili cheese dogs, okay?
Customer: Yeah, yeah. One sundae, strawberry.
Operator: Strawberry smoothie?
Customer: Yeah.
Operator: Okay, large? Larg...
Raw LLM response: {"1":"Operator: Are you ready?\nCustomer: Yeah.\nOperator: Two chili cheese dogs, okay?\nCustomer: Yeah, yeah. One sundae, strawberry.\nOperator: Strawberry smoothie?\nCustomer: Yeah.\nOperator: Okay, large? Large grande strawberry smoothie?\nCustomer: Sundae.\nOperator: Strawberry sundae, large?\nCustomer: Large.\nOperator: Large strawberry sundae?\nCustomer: Yeah.\nOperator: Okay, do you want whipped cream, chopped nuts, and sprinkles?\nCustomer: Chocolate.","2":"0","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Welcome to Dairy Queen. May I take your order?

Customer: Hi. What's the dipped strawberry cheesecake?

Operator: It's chocolate chunks with strawberry and cheesecake bites.

Customer: Is it...
2025-08-24 03:30:57,871 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:08,092 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Raw LLM response: {"1":"Operator: Welcome to Dairy Queen. May I take your order?\n\nCustomer: Hi. What's the dipped strawberry cheesecake?\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can I have the regular, the royal cheesecake, but with Oreo?\n\nOperator: Okay, what size? I have a royal Oreo fudge royal.\n\nCustomer: Nah, I think it's just the royal New York cheesecake.\n\nOperator: Okay, large. Okay, large New York royal, okay. Anything else for you? We do have our soft pretzel sticks with queso for $3.89 if you need a little food option to go with that today.\n\nCustomer: Thank you. Actually, I do have a question about the dipped strawberry cheesecake.\n\nOperator: It's chocolate chunks with strawberry and cheesecake bites.\n\nCustomer: Is it basically just a royal cheesecake but with chocolate?\n\nOperator: Well, it's got chocolate chunks in it. It's just got chocolate chunks, strawberry, and cheesecake pieces. It doesn't have a core.\n\nCustomer: Can","2":"0","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Let me know if you have any questions on the menu.

Customer: Okay, thank you.

Customer: Can I do a small caramel craze blizzard?

Operator: A small caramel craze? Reese's caramel craze? If...
Raw LLM response: {"1":"Operator: Let me know if you have any questions on the menu.\nCustomer: Okay, thank you.\nCustomer: Can I do a small caramel craze blizzard?\nOperator: A small caramel craze? Reese's caramel craze? If you want a little extra Reese's in there, it makes it really good.\nCustomer: I'm okay.\nOperator: What's that?\nCustomer: I'm sure.\nOperator: Okay. Anything else for you today? I've got soft pretzel sticks with queso for $3.89 if you need a food option to go with that.\nCustomer: Can I do a small Oreo blizzard?\nOperator: Small Oreo? Do you want a little extra Oreo in that?\nCustomer: No, thank you.\nOperator: Okay. Anything else for you today?\nCustomer: Just a cup of vanilla soft serve.\nOperator: Okay. What size?\nCustomer: Small.\nOperator: You want a cup of small vanilla cup?\nCustomer: Yes, please.\nOperator: You want sprinkles on that today?\nCustomer: No, thank you.\nOperator: Okay, will that do it for you?\nCustomer: Yes, that's it.\nOperator: $16.75 at the window. Thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Hi, welcome to Duke. What do you have? Nothing. If you have any questions on the menu. I'll take a peanut buster parfait please. Peanut buster, did you want whipped cream and sprinkles on that also? T...
2025-08-24 03:31:19,309 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:31:19,310 - INFO - Transaction splitting completed: 15 transactions identified
2025-08-24 03:31:19,310 - INFO - Uploading artifacts to S3 with prefix: deriv/session=c3ad8372-41bf-430d-9206-bc2df059f917/
2025-08-24 03:31:19,797 - INFO - Artifacts uploaded to S3
2025-08-24 03:31:19,797 - INFO - Inserting 15 transactions into database
2025-08-24 03:31:19,798 - INFO - Transaction 1: 2025-08-17T18:05:31Z to 2025-08-17T18:08:46Z (video seconds 330.0-525.0)
2025-08-24 03:31:19,798 - INFO - Transaction 2: 2025-08-17T18:09:16Z to 2025-08-17T18:15:16Z (video seconds 555.0-915.0)
2025-08-24 03:31:19,798 - INFO - Transaction 3: 2025-08-17T18:16:16Z to 2025-08-17T18:17:23.500000Z (video seconds 975.0-1042.5)
2025-08-24 03:31:19,798 - INFO - Transaction 4: 2025-08-17T18:17:23.500000Z to 2025-08-17T18:18:31Z (video seconds 1042.5-1110.0)
2025-08-24 03:31:19,798 - INFO - Transaction 5: 2025-08-17T18:19:31Z to 2025-08-17T18:21:01Z (video seconds 1170.0-1260.0)
2025-08-24 03:31:19,798 - INFO - Transaction 6: 2025-08-17T18:21:01Z to 2025-08-17T18:22:31Z (video seconds 1260.0-1350.0)
2025-08-24 03:31:19,799 - INFO - Transaction 7: 2025-08-17T18:25:31Z to 2025-08-17T18:33:01Z (video seconds 1530.0-1980.0)
2025-08-24 03:31:19,799 - INFO - Transaction 8: 2025-08-17T18:34:31Z to 2025-08-17T18:34:46Z (video seconds 2070.0-2085.0)
2025-08-24 03:31:19,799 - INFO - Transaction 9: 2025-08-17T18:35:01Z to 2025-08-17T18:35:31Z (video seconds 2100.0-2130.0)
2025-08-24 03:31:19,799 - INFO - Transaction 10: 2025-08-17T18:35:46Z to 2025-08-17T18:36:46Z (video seconds 2145.0-2205.0)
2025-08-24 03:31:19,799 - INFO - Transaction 11: 2025-08-17T18:37:01Z to 2025-08-17T18:41:01Z (video seconds 2220.0-2460.0)
2025-08-24 03:31:19,799 - INFO - Transaction 12: 2025-08-17T18:43:46Z to 2025-08-17T18:48:01Z (video seconds 2625.0-2880.0)
2025-08-24 03:31:19,799 - INFO - Transaction 13: 2025-08-17T18:48:46Z to 2025-08-17T18:50:31Z (video seconds 2925.0-3030.0)
2025-08-24 03:31:19,799 - INFO - Transaction 14: 2025-08-17T18:53:31Z to 2025-08-17T18:54:31Z (video seconds 3210.0-3270.0)
2025-08-24 03:31:19,799 - INFO - Transaction 15: 2025-08-17T18:58:31Z to 2025-08-17T18:59:31Z (video seconds 3510.0-3570.0)
2025-08-24 03:31:19,802 - INFO - Saved 15 transaction records to exports/20250824_033119_transactions.csv
2025-08-24 03:31:20,153 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/transactions?columns=%22meta%22%2C%22video_id%22%2C%22tx_range%22%2C%22ended_at%22%2C%22kind%22%2C%22run_id%22%2C%22started_at%22 "HTTP/2 201 Created"
2025-08-24 03:31:20,160 - INFO - Inserted transactions with IDs: ['6f0140d1-c808-41c4-9625-e0500cbbba13', 'd6d56a8d-bba4-4a48-a8b6-053fe58844ca', 'd53d3253-f439-4213-9f6a-23c4a1d9fe06', 'e2afa86f-7120-426c-b1e7-212b03681eca', '89ff7671-cb89-432a-a66e-d66e94cccfe0', 'b46d32e4-0562-4edd-9028-4067e7352db3', 'f8371685-e679-4cc6-ba57-418b134508c7', 'f46dd795-aebd-4eac-8779-f593f9d2227f', '35b9206e-b411-4335-86a9-525f77cc2d59', 'a10b730d-8459-4cc2-9d7e-7b893511b645', '9d4736b3-5101-4c67-b142-76816fe555b9', '767583b5-2ba4-41dd-9351-d81d8acc07f9', '09c0aaf0-35ab-4f0d-a7d8-bfdd0f505ce1', '61f0e272-da6b-4bfd-877c-c15e118bb146', '005eb957-ea4d-4fe1-8eb8-958595cc89dc']
2025-08-24 03:31:20,161 - INFO - Starting grading for 15 transactions
2025-08-24 03:31:34,292 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:32:03,644 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Raw LLM response: {"1":"Operator: Hi, welcome to Duke.\nOperator: What do you have? Nothing. If you have any questions on the menu.\nCustomer: I'll take a peanut buster parfait please.\nOperator: Peanut buster, did you want whipped cream and sprinkles on that also? That's the new craze.\nCustomer: For the peanut buster parfait?\nOperator: Yeah, they've added whipped cream and sprinkles on top.\nCustomer: I'm okay, thanks.\nOperator: Okay, and we do have our soft pretzel sticks with queso for $3.89 if you need a side food order today.\nCustomer: I think I'm good, thank you though.\nOperator: Anything else for you?\nCustomer: That'll do it.\nOperator: $6.86 at the window, thank you.\nCustomer: Thank you.","2":"1","3":"0","4":"0","5":"0","6":"0"}
==================================================

=== STEP 1 (Transaction Splitting) RAW OUTPUT ===
Input transcript: Operator: Let me get a peanut butter parfait. Customer: Peanut butter parfait for you? Operator: Yeah. Customer: Do you want some whipped cream and chopped nuts on that? That's the new phase. Operator...
Raw LLM response: {"1": "Operator: Let me get a peanut butter parfait.\nCustomer: Peanut butter parfait for you?\nOperator: Yeah.\nCustomer: Do you want some whipped cream and chopped nuts on that? That's the new phase.\nOperator: I'll take the chopped nuts, not the whipped cream though.\nCustomer: Okay, it's already on it. It already has chopped nuts on it.\nOperator: Yeah, yeah, we're good.\nCustomer: Anything else for you?\nOperator: That'll be it.\nCustomer: So you just want a regular?\nOperator: Yeah.\nCustomer: Okay, $6.86.", "2": "1", "3": "0", "4": "0", "5": "0", "6": "0"}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
Operator:
Customer:
...
Raw LLM response: {"1": "0", "2": 0, "3": 0, "4": "0", "5": 0, "6": "0", "7": 0, "8": 0, "9": 0, "10": "0", "11": 0, "12": 0, "13": "0", "14": 0, "15": "0", "16": 0, "17": 0, "18": "0", "19": "0", "20": 0, "21": "The transcript contained no actual dialogue or order details, therefore no items were ordered and no upsell, upsize, or add-on opportunities occurred.", "22": "Transcript consisted solely of repeated Operator and Customer labels with no content, creating ambiguity about any transactions; also instructions conflict regarding whether dictionary values should all be strings or integers, so numeric fields were output as integers and descriptive fields as strings."}
==================================================
Parsed JSON: {'1': '0', '2': 0, '3': 0, '4': '0', '5': 0, '6': '0', '7': 0, '8': 0, '9': 0, '10': '0', '11': 0, '12': 0, '13': '0', '14': 0, '15': '0', '16': 0, '17': 0, '18': '0', '19': '0', '20': 0, '21': 'The transcript contained no actual dialogue or order details, therefore no items were ordered and no upsell, upsize, or add-on opportunities occurred.', '22': 'Transcript consisted solely of repeated Operator and Customer labels with no content, creating ambiguity about any transactions; also instructions conflict regarding whether dictionary values should all be strings or integers, so numeric fields were output as integers and descriptive fields as strings.'}
GPT Price: $20.024000 (input: 5840 tokens, output: 1043 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': '0', 'num_items_initial': 0, 'num_upsell_opportunities': 0, 'items_upsellable': '0', 'num_upsell_offers': 0, 'items_upsold': '0', 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': '0', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': '0', 'num_addon_opportunities': 0, 'items_addonable': '0', 'num_addon_offers': 0, 'num_addon_success': 0, 'items_addon_success': '0', 'items_after': '0', 'num_items_after': 0, 'feedback': 'The transcript contained no actual dialogue or order details, therefore no items were ordered and no upsell, upsize, or add-on opportunities occurred.', 'issues': 'Transcript consisted solely of repeated Operator and Customer labels with no content, creating ambiguity about any transactions; also instructions conflict regarding whether dictionary values should all be strings or integers, so numeric fields were output as integers and descriptive fields as strings.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: If you have any questions on the menu, order when you're ready.
Customer: Yeah, still looking, thank you.
Customer: We'll start with a small Blizzard of the Month.
Operator: Okay, which one,...
Raw LLM response: {"1": "Small Caramel Craze Blizzard, Small Butterfinger Blizzard", "2": 2, "3": 0, "4": 0, "5": 1, "6": 0, "7": 0, "8": 0, "9": 2, "10": "Small Caramel Craze Blizzard, Small Butterfinger Blizzard", "11": 0, "12": 0, "13": 0, "14": 2, "15": "Small Caramel Craze Blizzard, Small Butterfinger Blizzard", "16": 2, "17": 2, "18": "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", "19": "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", "20": 2, "21": "Operator suggested additional toppings for both Blizzards and successfully added them; no upsizing attempts despite two opportunities and made one unrelated upsell offer of pretzel sticks which was declined. Good job on add-ons but could improve by offering larger Blizzard sizes and package upsells.", "22": "No major difficulties; unclear whether upsell offer of pretzel sticks counts as chance when not tied to an ordered item, chose to count as an offer made but zero chances since order items lacked defined upsell scenarios."}
==================================================
Parsed JSON: {'1': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', '2': 2, '3': 0, '4': 0, '5': 1, '6': 0, '7': 0, '8': 0, '9': 2, '10': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', '11': 0, '12': 0, '13': 0, '14': 2, '15': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', '16': 2, '17': 2, '18': "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", '19': "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", '20': 2, '21': 'Operator suggested additional toppings for both Blizzards and successfully added them; no upsizing attempts despite two opportunities and made one unrelated upsell offer of pretzel sticks which was declined. Good job on add-ons but could improve by offering larger Blizzard sizes and package upsells.', '22': 'No major difficulties; unclear whether upsell offer of pretzel sticks counts as chance when not tied to an ordered item, chose to count as an offer made but zero chances since order items lacked defined upsell scenarios.'}
GPT Price: $36.732000 (input: 4878 tokens, output: 3372 tokens)
==================================================
2025-08-24 03:32:30,561 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:33:17,694 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', 'num_items_initial': 2, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 2, 'items_upsizeable': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 2, 'items_addonable': 'Small Caramel Craze Blizzard, Small Butterfinger Blizzard', 'num_addon_offers': 2, 'num_addon_success': 2, 'items_addon_success': "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", 'items_after': "Small Caramel Craze Blizzard with extra Reese's cups, Small Butterfinger Blizzard with triple Butterfinger", 'num_items_after': 2, 'feedback': 'Operator suggested additional toppings for both Blizzards and successfully added them; no upsizing attempts despite two opportunities and made one unrelated upsell offer of pretzel sticks which was declined. Good job on add-ons but could improve by offering larger Blizzard sizes and package upsells.', 'issues': 'No major difficulties; unclear whether upsell offer of pretzel sticks counts as chance when not tied to an ordered item, chose to count as an offer made but zero chances since order items lacked defined upsell scenarios.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Looks like a small Oreo cookie blizzard.
Customer: Oreo, do you want a little extra Oreo in that? It makes it really good.
Operator: Sure.
Customer: And we do have our soft pretzel sticks wi...
Raw LLM response: {"1":"Small Oreo Blizzard","2":1,"3":0,"4":0,"5":1,"6":0,"7":0,"8":0,"9":1,"10":"Small Oreo Blizzard","11":0,"12":0,"13":0,"14":1,"15":"Small Oreo Blizzard","16":1,"17":1,"18":"Extra Oreo on Small Oreo Blizzard","19":"Small Oreo Blizzard with extra Oreo","20":1,"21":"Great job offering an additional topping by suggesting extra Oreo and a food item add-on, but you missed the valid upsizing opportunity on the small Blizzard. Always remember to offer the large size when the guest does not specify.","22":"Speaker labels appear reversed, making it necessary to interpret who was the operator and who was the customer, and the pretzel stick suggestion did not have a predefined upsell scenario."}
==================================================
Parsed JSON: {'1': 'Small Oreo Blizzard', '2': 1, '3': 0, '4': 0, '5': 1, '6': 0, '7': 0, '8': 0, '9': 1, '10': 'Small Oreo Blizzard', '11': 0, '12': 0, '13': 0, '14': 1, '15': 'Small Oreo Blizzard', '16': 1, '17': 1, '18': 'Extra Oreo on Small Oreo Blizzard', '19': 'Small Oreo Blizzard with extra Oreo', '20': 1, '21': 'Great job offering an additional topping by suggesting extra Oreo and a food item add-on, but you missed the valid upsizing opportunity on the small Blizzard. Always remember to offer the large size when the guest does not specify.', '22': 'Speaker labels appear reversed, making it necessary to interpret who was the operator and who was the customer, and the pretzel stick suggestion did not have a predefined upsell scenario.'}
GPT Price: $29.954000 (input: 4753 tokens, output: 2556 tokens)
==================================================
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Small Oreo Blizzard', 'num_items_initial': 1, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 1, 'items_upsizeable': 'Small Oreo Blizzard', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 1, 'items_addonable': 'Small Oreo Blizzard', 'num_addon_offers': 1, 'num_addon_success': 1, 'items_addon_success': 'Extra Oreo on Small Oreo Blizzard', 'items_after': 'Small Oreo Blizzard with extra Oreo', 'num_items_after': 1, 'feedback': 'Great job offering an additional topping by suggesting extra Oreo and a food item add-on, but you missed the valid upsizing opportunity on the small Blizzard. Always remember to offer the large size when the guest does not specify.', 'issues': 'Speaker labels appear reversed, making it necessary to interpret who was the operator and who was the customer, and the pretzel stick suggestion did not have a predefined upsell scenario.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Customer: Okay, we're ready.
Operator: Order when you're ready.
Customer: Okay, thank you. Can we have the brownie and Oreo confection?
Operator: The brownie Oreo confection, did you want a little ext...
Raw LLM response: {"1": "Brownie Oreo Cupfection, Small Chocolate Cone double dipped", "2": 2, "3": 1, "4": "Small Diet Coke", "5": 1, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 2, "15": "Brownie Oreo Cupfection; Small Chocolate Cone", "16": 1, "17": 1, "18": "Brownie Oreo Cupfection (extra Oreo)", "19": "Brownie Oreo Cupfection with extra Oreo, Small Chocolate Cone double dipped, Small Diet Coke", "20": 3, "21": "Operator effectively sold an additional topping on the Cupfection and attempted a food add-on upsell with pretzel sticks, but missed opportunities to upsell the small drink to the 2-for-5 deal or offer a larger size. No upsizing was attempted and additional topping options for the cone were not offered. Overall: strong topping upsell, weak upsizing and broader upsell execution.", "22": "Ambiguity on whether pretzel-stick offer should count as an upsell tied to an existing item or a general add-on; counted as one upsell offer. Diet Coke was requested after the upsell attempt, so it is excluded from the initial order list and included only in the final order."}
==================================================
Parsed JSON: {'1': 'Brownie Oreo Cupfection, Small Chocolate Cone double dipped', '2': 2, '3': 1, '4': 'Small Diet Coke', '5': 1, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 2, '15': 'Brownie Oreo Cupfection; Small Chocolate Cone', '16': 1, '17': 1, '18': 'Brownie Oreo Cupfection (extra Oreo)', '19': 'Brownie Oreo Cupfection with extra Oreo, Small Chocolate Cone double dipped, Small Diet Coke', '20': 3, '21': 'Operator effectively sold an additional topping on the Cupfection and attempted a food add-on upsell with pretzel sticks, but missed opportunities to upsell the small drink to the 2-for-5 deal or offer a larger size. No upsizing was attempted and additional topping options for the cone were not offered. Overall: strong topping upsell, weak upsizing and broader upsell execution.', '22': 'Ambiguity on whether pretzel-stick offer should count as an upsell tied to an existing item or a general add-on; counted as one upsell offer. Diet Coke was requested after the upsell attempt, so it is excluded from the initial order list and included only in the final order.'}
GPT Price: $42.948000 (input: 4830 tokens, output: 4161 tokens)
==================================================
2025-08-24 03:34:23,720 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:34:59,844 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Brownie Oreo Cupfection, Small Chocolate Cone double dipped', 'num_items_initial': 2, 'num_upsell_opportunities': 1, 'items_upsellable': 'Small Diet Coke', 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': 0, 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 2, 'items_addonable': 'Brownie Oreo Cupfection; Small Chocolate Cone', 'num_addon_offers': 1, 'num_addon_success': 1, 'items_addon_success': 'Brownie Oreo Cupfection (extra Oreo)', 'items_after': 'Brownie Oreo Cupfection with extra Oreo, Small Chocolate Cone double dipped, Small Diet Coke', 'num_items_after': 3, 'feedback': 'Operator effectively sold an additional topping on the Cupfection and attempted a food add-on upsell with pretzel sticks, but missed opportunities to upsell the small drink to the 2-for-5 deal or offer a larger size. No upsizing was attempted and additional topping options for the cone were not offered. Overall: strong topping upsell, weak upsizing and broader upsell execution.', 'issues': 'Ambiguity on whether pretzel-stick offer should count as an upsell tied to an existing item or a general add-on; counted as one upsell offer. Diet Coke was requested after the upsell attempt, so it is excluded from the initial order list and included only in the final order.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Large vanilla cone?
Operator: What was that? Large vanilla cone?
Operator: Did you want that dipped in sprinkles?
Operator: Yes sir, I can hardly hear you, sorry.
Operator: No, okay. Large v...
Raw LLM response: {"1": "Vanilla Cone", "2": 1, "3": 0, "4": 0, "5": 0, "6": 0, "7": 0, "8": 1, "9": 1, "10": "Vanilla Cone", "11": 1, "12": 1, "13": "Vanilla Cone (Large)", "14": 1, "15": "Vanilla Cone", "16": 1, "17": 0, "18": 0, "19": "Large Vanilla Cone", "20": 1, "21": "Operator verified the customer wanted the large size, which counted as one upsizing offer and was accepted. Offered sprinkles as an additional topping but customer declined. Cross-sell of pretzel sticks attempted but not counted as an upsell opportunity for this item. Overall, one successful upsizing, no successful add-ons.", "22": "Customer speech not available so initial size request and response to topping offer inferred from operator’s statements. Treated 'Large vanilla cone?' as an upsizing offer; counted cross-sell of pretzel sticks outside upsell metrics because cone has no defined upsell path."}
==================================================
Parsed JSON: {'1': 'Vanilla Cone', '2': 1, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 1, '9': 1, '10': 'Vanilla Cone', '11': 1, '12': 1, '13': 'Vanilla Cone (Large)', '14': 1, '15': 'Vanilla Cone', '16': 1, '17': 0, '18': 0, '19': 'Large Vanilla Cone', '20': 1, '21': 'Operator verified the customer wanted the large size, which counted as one upsizing offer and was accepted. Offered sprinkles as an additional topping but customer declined. Cross-sell of pretzel sticks attempted but not counted as an upsell opportunity for this item. Overall, one successful upsizing, no successful add-ons.', '22': "Customer speech not available so initial size request and response to topping offer inferred from operator’s statements. Treated 'Large vanilla cone?' as an upsizing offer; counted cross-sell of pretzel sticks outside upsell metrics because cone has no defined upsell path."}
GPT Price: $46.932000 (input: 4746 tokens, output: 4680 tokens)
==================================================
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Vanilla Cone', 'num_items_initial': 1, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 0, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 1, 'num_upsize_opportunities': 1, 'items_upsizeable': 'Vanilla Cone', 'num_upsize_offers': 1, 'num_upsize_success': 1, 'items_upsize_success': 'Vanilla Cone (Large)', 'num_addon_opportunities': 1, 'items_addonable': 'Vanilla Cone', 'num_addon_offers': 1, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': 'Large Vanilla Cone', 'num_items_after': 1, 'feedback': 'Operator verified the customer wanted the large size, which counted as one upsizing offer and was accepted. Offered sprinkles as an additional topping but customer declined. Cross-sell of pretzel sticks attempted but not counted as an upsell opportunity for this item. Overall, one successful upsizing, no successful add-ons.', 'issues': "Customer speech not available so initial size request and response to topping offer inferred from operator’s statements. Treated 'Large vanilla cone?' as an upsizing offer; counted cross-sell of pretzel sticks outside upsell metrics because cone has no defined upsell path.", 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: All cherry dipped cones, do you want them double dipped in cherry because it keeps them colder longer in this hot weather?
Operator: Yep.
Operator: Okay, it doesn't melt as fast also. And we...
Raw LLM response: {"1": "Cherry Dipped Cone (2), Small Vanilla Cone", "2": 3, "3": 0, "4": 0, "5": 1, "6": 0, "7": 0, "8": 0, "9": 2, "10": "Cherry Dipped Cone (2)", "11": 0, "12": 0, "13": 0, "14": 2, "15": "Cherry Dipped Cone (2)", "16": 2, "17": 2, "18": "Cherry Dipped Cone double dip (2)", "19": "Cherry Dipped Cone double dip (2), Small Vanilla Cone", "20": 3, "21": "The operator suggested pretzel sticks to upsell but the customer did not accept, resulting in no successful upsell. They did, however, effectively offer and secure double-dip add-ons for both dipped cones. No upsizing offer was made even though the dipped cones had an upsizing opportunity. Future interactions should include offering the large size when appropriate to maximize sales.", "22": "Only operator dialogue was provided, so the initial customer order and acceptance of offers had to be inferred. Cones’ size was not stated, creating uncertainty about upsizing eligibility, but guidelines indicate an upsizing chance when no size is given. The pretzel suggestion is technically a cross-sell rather than an upsell of an existing item, leading to ambiguity in counting upselling chances."}
==================================================
Parsed JSON: {'1': 'Cherry Dipped Cone (2), Small Vanilla Cone', '2': 3, '3': 0, '4': 0, '5': 1, '6': 0, '7': 0, '8': 0, '9': 2, '10': 'Cherry Dipped Cone (2)', '11': 0, '12': 0, '13': 0, '14': 2, '15': 'Cherry Dipped Cone (2)', '16': 2, '17': 2, '18': 'Cherry Dipped Cone double dip (2)', '19': 'Cherry Dipped Cone double dip (2), Small Vanilla Cone', '20': 3, '21': 'The operator suggested pretzel sticks to upsell but the customer did not accept, resulting in no successful upsell. They did, however, effectively offer and secure double-dip add-ons for both dipped cones. No upsizing offer was made even though the dipped cones had an upsizing opportunity. Future interactions should include offering the large size when appropriate to maximize sales.', '22': 'Only operator dialogue was provided, so the initial customer order and acceptance of offers had to be inferred. Cones’ size was not stated, creating uncertainty about upsizing eligibility, but guidelines indicate an upsizing chance when no size is given. The pretzel suggestion is technically a cross-sell rather than an upsell of an existing item, leading to ambiguity in counting upselling chances.'}
GPT Price: $35.162000 (input: 4769 tokens, output: 3203 tokens)
==================================================
2025-08-24 03:35:13,713 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:20,173 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:35:37,660 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Cherry Dipped Cone (2), Small Vanilla Cone', 'num_items_initial': 3, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 2, 'items_upsizeable': 'Cherry Dipped Cone (2)', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 2, 'items_addonable': 'Cherry Dipped Cone (2)', 'num_addon_offers': 2, 'num_addon_success': 2, 'items_addon_success': 'Cherry Dipped Cone double dip (2)', 'items_after': 'Cherry Dipped Cone double dip (2), Small Vanilla Cone', 'num_items_after': 3, 'feedback': 'The operator suggested pretzel sticks to upsell but the customer did not accept, resulting in no successful upsell. They did, however, effectively offer and secure double-dip add-ons for both dipped cones. No upsizing offer was made even though the dipped cones had an upsizing opportunity. Future interactions should include offering the large size when appropriate to maximize sales.', 'issues': 'Only operator dialogue was provided, so the initial customer order and acceptance of offers had to be inferred. Cones’ size was not stated, creating uncertainty about upsizing eligibility, but guidelines indicate an upsizing chance when no size is given. The pretzel suggestion is technically a cross-sell rather than an upsell of an existing item, leading to ambiguity in counting upselling chances.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Do you want some extra peanut butter cups in there?...
Raw LLM response: {"1": "0", "2": 0, "3": 0, "4": "0", "5": 0, "6": "0", "7": 0, "8": 0, "9": 0, "10": "0", "11": 0, "12": 0, "13": "0", "14": 0, "15": "0", "16": 1, "17": 0, "18": "0", "19": "0", "20": 0, "21": "The operator proactively offered an additional topping by asking if the customer wanted extra peanut butter cups, which is a positive sales effort. However, the order was never confirmed or repeated, so the relevance of the offer is uncertain. Confirm the customer’s items first, then tailor topping or upsell suggestions, and document customer responses to track conversions.", "22": "Transcript provides only one operator question without any customer request or response, so items ordered, chances, and successes could not be determined; all related counts are recorded as 0 except for the single additional-topping offer."}
==================================================
Parsed JSON: {'1': '0', '2': 0, '3': 0, '4': '0', '5': 0, '6': '0', '7': 0, '8': 0, '9': 0, '10': '0', '11': 0, '12': 0, '13': '0', '14': 0, '15': '0', '16': 1, '17': 0, '18': '0', '19': '0', '20': 0, '21': 'The operator proactively offered an additional topping by asking if the customer wanted extra peanut butter cups, which is a positive sales effort. However, the order was never confirmed or repeated, so the relevance of the offer is uncertain. Confirm the customer’s items first, then tailor topping or upsell suggestions, and document customer responses to track conversions.', '22': 'Transcript provides only one operator question without any customer request or response, so items ordered, chances, and successes could not be determined; all related counts are recorded as 0 except for the single additional-topping offer.'}
GPT Price: $19.992000 (input: 4660 tokens, output: 1334 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': '0', 'num_items_initial': 0, 'num_upsell_opportunities': 0, 'items_upsellable': '0', 'num_upsell_offers': 0, 'items_upsold': '0', 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': '0', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': '0', 'num_addon_opportunities': 0, 'items_addonable': '0', 'num_addon_offers': 1, 'num_addon_success': 0, 'items_addon_success': '0', 'items_after': '0', 'num_items_after': 0, 'feedback': 'The operator proactively offered an additional topping by asking if the customer wanted extra peanut butter cups, which is a positive sales effort. However, the order was never confirmed or repeated, so the relevance of the offer is uncertain. Confirm the customer’s items first, then tailor topping or upsell suggestions, and document customer responses to track conversions.', 'issues': 'Transcript provides only one operator question without any customer request or response, so items ordered, chances, and successes could not be determined; all related counts are recorded as 0 except for the single additional-topping offer.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator:...
Raw LLM response: {"1":"0","2":0,"3":0,"4":"0","5":0,"6":"0","7":0,"8":0,"9":0,"10":"0","11":0,"12":0,"13":"0","14":0,"15":"0","16":0,"17":0,"18":"0","19":"0","20":0,"21":"No customer order was captured in the transcript, so there were no opportunities to upsell, upsize, or add toppings. Operator only greeted.","22":"Transcript ended after operator's greeting; no customer dialogue, ambiguous whether any transaction occurred."}
==================================================
Parsed JSON: {'1': '0', '2': 0, '3': 0, '4': '0', '5': 0, '6': '0', '7': 0, '8': 0, '9': 0, '10': '0', '11': 0, '12': 0, '13': '0', '14': 0, '15': '0', '16': 0, '17': 0, '18': '0', '19': '0', '20': 0, '21': 'No customer order was captured in the transcript, so there were no opportunities to upsell, upsize, or add toppings. Operator only greeted.', '22': "Transcript ended after operator's greeting; no customer dialogue, ambiguous whether any transaction occurred."}
GPT Price: $15.010000 (input: 4649 tokens, output: 714 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': '0', 'num_items_initial': 0, 'num_upsell_opportunities': 0, 'items_upsellable': '0', 'num_upsell_offers': 0, 'items_upsold': '0', 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': '0', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': '0', 'num_addon_opportunities': 0, 'items_addonable': '0', 'num_addon_offers': 0, 'num_addon_success': 0, 'items_addon_success': '0', 'items_after': '0', 'num_items_after': 0, 'feedback': 'No customer order was captured in the transcript, so there were no opportunities to upsell, upsize, or add toppings. Operator only greeted.', 'issues': "Transcript ended after operator's greeting; no customer dialogue, ambiguous whether any transaction occurred.", 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: When you're ready....
Raw LLM response: {"1":"0","2":0,"3":0,"4":"0","5":0,"6":"0","7":0,"8":0,"9":0,"10":"0","11":0,"12":0,"13":"0","14":0,"15":"0","16":0,"17":0,"18":"0","19":"0","20":0,"21":"The operator greeted the customer and prompted for an order, but no items were requested, leaving no opportunities for upselling, upsizing or add-ons.","22":"Transcript contained only the operator’s prompt with no customer order, so all quantitative fields are zero; ambiguity on whether to treat this as a transaction, but a single zero-value transaction was provided."}
==================================================
2025-08-24 03:35:54,431 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:36:35,290 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Parsed JSON: {'1': '0', '2': 0, '3': 0, '4': '0', '5': 0, '6': '0', '7': 0, '8': 0, '9': 0, '10': '0', '11': 0, '12': 0, '13': '0', '14': 0, '15': '0', '16': 0, '17': 0, '18': '0', '19': '0', '20': 0, '21': 'The operator greeted the customer and prompted for an order, but no items were requested, leaving no opportunities for upselling, upsizing or add-ons.', '22': 'Transcript contained only the operator’s prompt with no customer order, so all quantitative fields are zero; ambiguity on whether to treat this as a transaction, but a single zero-value transaction was provided.'}
GPT Price: $19.306000 (input: 4653 tokens, output: 1250 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': '0', 'num_items_initial': 0, 'num_upsell_opportunities': 0, 'items_upsellable': '0', 'num_upsell_offers': 0, 'items_upsold': '0', 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': '0', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': '0', 'num_addon_opportunities': 0, 'items_addonable': '0', 'num_addon_offers': 0, 'num_addon_success': 0, 'items_addon_success': '0', 'items_after': '0', 'num_items_after': 0, 'feedback': 'The operator greeted the customer and prompted for an order, but no items were requested, leaving no opportunities for upselling, upsizing or add-ons.', 'issues': 'Transcript contained only the operator’s prompt with no customer order, so all quantitative fields are zero; ambiguity on whether to treat this as a transaction, but a single zero-value transaction was provided.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: I just dropped it. Hold on....
Raw LLM response: {"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":"No customer order was taken. The operator only stated a phrase and paused. There were zero opportunities to upsell, upsize, or add toppings. Remember to engage the customer, confirm their order, and offer relevant upsizing or upselling options when appropriate.","22":"Transcript incomplete with only operator speech, resulting in no order data and potential ambiguity on whether a transaction occurred."}
==================================================
Parsed JSON: {'1': 0, '2': 0, '3': 0, '4': 0, '5': 0, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 0, '15': 0, '16': 0, '17': 0, '18': 0, '19': 0, '20': 0, '21': 'No customer order was taken. The operator only stated a phrase and paused. There were zero opportunities to upsell, upsize, or add toppings. Remember to engage the customer, confirm their order, and offer relevant upsizing or upselling options when appropriate.', '22': 'Transcript incomplete with only operator speech, resulting in no order data and potential ambiguity on whether a transaction occurred.'}
GPT Price: $22.410000 (input: 4657 tokens, output: 1637 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 1, 'out_of_stock_items': '0', 'items_initial': 0, 'num_items_initial': 0, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 0, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': 0, 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 0, 'items_addonable': 0, 'num_addon_offers': 0, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': 0, 'num_items_after': 0, 'feedback': 'No customer order was taken. The operator only stated a phrase and paused. There were zero opportunities to upsell, upsize, or add toppings. Remember to engage the customer, confirm their order, and offer relevant upsizing or upselling options when appropriate.', 'issues': 'Transcript incomplete with only operator speech, resulting in no order data and potential ambiguity on whether a transaction occurred.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Are you ready?
Customer: Yeah.
Operator: Two chili cheese dogs, okay?
Customer: Yeah, yeah. One sundae, strawberry.
Operator: Strawberry smoothie?
Customer: Yeah.
Operator: Okay, large? Larg...
Raw LLM response: {"1": "2 Chili Cheese Dogs, Strawberry Sundae", "2": 3, "3": 5, "4": "Chili Cheese Dog (x2), Strawberry Sundae", "5": 0, "6": 0, "7": 0, "8": 1, "9": 1, "10": "Strawberry Sundae", "11": 1, "12": 1, "13": "Large Strawberry Sundae", "14": 1, "15": "Strawberry Sundae", "16": 1, "17": 0, "18": 0, "19": "2 Chili Cheese Dogs, Large Strawberry Sundae", "20": 3, "21": "Operator correctly upsized the sundae to large and offered extra toppings, but missed four clear chances to upsell each chili cheese dog to a combo or at least a drink and fries. Initial confusion between smoothie and sundae slowed the process; be sure to clarify the item before offering size. Remember to mention meal deals or side and drink add-ons with every hot dog or chili dog order.", "22": "Uncertainty whether the customer saying Chocolate indicated acceptance of an extra topping or a change of flavor; treated as no additional topping since it did not match the operator’s offer."}
==================================================
Parsed JSON: {'1': '2 Chili Cheese Dogs, Strawberry Sundae', '2': 3, '3': 5, '4': 'Chili Cheese Dog (x2), Strawberry Sundae', '5': 0, '6': 0, '7': 0, '8': 1, '9': 1, '10': 'Strawberry Sundae', '11': 1, '12': 1, '13': 'Large Strawberry Sundae', '14': 1, '15': 'Strawberry Sundae', '16': 1, '17': 0, '18': 0, '19': '2 Chili Cheese Dogs, Large Strawberry Sundae', '20': 3, '21': 'Operator correctly upsized the sundae to large and offered extra toppings, but missed four clear chances to upsell each chili cheese dog to a combo or at least a drink and fries. Initial confusion between smoothie and sundae slowed the process; be sure to clarify the item before offering size. Remember to mention meal deals or side and drink add-ons with every hot dog or chili dog order.', '22': 'Uncertainty whether the customer saying Chocolate indicated acceptance of an extra topping or a change of flavor; treated as no additional topping since it did not match the operator’s offer.'}
GPT Price: $42.486000 (input: 4747 tokens, output: 4124 tokens)
==================================================
2025-08-24 03:37:34,883 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:10,834 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': '2 Chili Cheese Dogs, Strawberry Sundae', 'num_items_initial': 3, 'num_upsell_opportunities': 5, 'items_upsellable': 'Chili Cheese Dog (x2), Strawberry Sundae', 'num_upsell_offers': 0, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 1, 'num_upsize_opportunities': 1, 'items_upsizeable': 'Strawberry Sundae', 'num_upsize_offers': 1, 'num_upsize_success': 1, 'items_upsize_success': 'Large Strawberry Sundae', 'num_addon_opportunities': 1, 'items_addonable': 'Strawberry Sundae', 'num_addon_offers': 1, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': '2 Chili Cheese Dogs, Large Strawberry Sundae', 'num_items_after': 3, 'feedback': 'Operator correctly upsized the sundae to large and offered extra toppings, but missed four clear chances to upsell each chili cheese dog to a combo or at least a drink and fries. Initial confusion between smoothie and sundae slowed the process; be sure to clarify the item before offering size. Remember to mention meal deals or side and drink add-ons with every hot dog or chili dog order.', 'issues': 'Uncertainty whether the customer saying Chocolate indicated acceptance of an extra topping or a change of flavor; treated as no additional topping since it did not match the operator’s offer.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Welcome to Dairy Queen. May I take your order?

Customer: Hi. What's the dipped strawberry cheesecake?

Operator: It's chocolate chunks with strawberry and cheesecake bites.

Customer: Is it...
Raw LLM response: {"1": "Royal New York Cheesecake Blizzard", "2": 1, "3": 0, "4": 0, "5": 6, "6": 0, "7": 0, "8": 0, "9": 1, "10": "Royal New York Cheesecake Blizzard", "11": 6, "12": 1, "13": "Royal New York Cheesecake Blizzard", "14": 1, "15": "Royal New York Cheesecake Blizzard", "16": 0, "17": 0, "18": 0, "19": "Large Royal New York Cheesecake Blizzard", "20": 1, "21": "Operator repeatedly asked for size instead of offering largest and defaulted to large, constituting invalid upsizing offers; still resulted in successful upsizing. Multiple pretzel upsell attempts were made but declined. No additional topping offer made. Recommend making a single clear, valid upsizing offer and diversifying upsell items rather than repeating.", "22": "Dialogue was duplicated several times within transcript making it difficult to determine unique offers; treated all dialogue as one transaction and counted each repeated upsell and upsize question as separate offers. Ambiguity over whether requesting size counts as upsizing offer; followed scenario 11 guidance to include it."}
==================================================
Parsed JSON: {'1': 'Royal New York Cheesecake Blizzard', '2': 1, '3': 0, '4': 0, '5': 6, '6': 0, '7': 0, '8': 0, '9': 1, '10': 'Royal New York Cheesecake Blizzard', '11': 6, '12': 1, '13': 'Royal New York Cheesecake Blizzard', '14': 1, '15': 'Royal New York Cheesecake Blizzard', '16': 0, '17': 0, '18': 0, '19': 'Large Royal New York Cheesecake Blizzard', '20': 1, '21': 'Operator repeatedly asked for size instead of offering largest and defaulted to large, constituting invalid upsizing offers; still resulted in successful upsizing. Multiple pretzel upsell attempts were made but declined. No additional topping offer made. Recommend making a single clear, valid upsizing offer and diversifying upsell items rather than repeating.', '22': 'Dialogue was duplicated several times within transcript making it difficult to determine unique offers; treated all dialogue as one transaction and counted each repeated upsell and upsize question as separate offers. Ambiguity over whether requesting size counts as upsizing offer; followed scenario 11 guidance to include it.'}
GPT Price: $44.228000 (input: 5874 tokens, output: 4060 tokens)
==================================================
Mapped details: {'complete_order': 0, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Royal New York Cheesecake Blizzard', 'num_items_initial': 1, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 6, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 1, 'items_upsizeable': 'Royal New York Cheesecake Blizzard', 'num_upsize_offers': 6, 'num_upsize_success': 1, 'items_upsize_success': 'Royal New York Cheesecake Blizzard', 'num_addon_opportunities': 1, 'items_addonable': 'Royal New York Cheesecake Blizzard', 'num_addon_offers': 0, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': 'Large Royal New York Cheesecake Blizzard', 'num_items_after': 1, 'feedback': 'Operator repeatedly asked for size instead of offering largest and defaulted to large, constituting invalid upsizing offers; still resulted in successful upsizing. Multiple pretzel upsell attempts were made but declined. No additional topping offer made. Recommend making a single clear, valid upsizing offer and diversifying upsell items rather than repeating.', 'issues': 'Dialogue was duplicated several times within transcript making it difficult to determine unique offers; treated all dialogue as one transaction and counted each repeated upsell and upsize question as separate offers. Ambiguity over whether requesting size counts as upsizing offer; followed scenario 11 guidance to include it.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Let me know if you have any questions on the menu.
Customer: Okay, thank you.
Customer: Can I do a small caramel craze blizzard?
Operator: A small caramel craze? Reese's caramel craze? If yo...
Raw LLM response: {"1": "Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup", "2": 3, "3": 1, "4": "Small Vanilla Soft Serve Cup", "5": 1, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 3, "15": "Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup", "16": 3, "17": 0, "18": 0, "19": "Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup", "20": 3, "21": "Operator greeted and took order efficiently. Provided one cross-sell offer for pretzel sticks and three additional-topping offers (extra Reese’s, extra Oreo, sprinkles). No upsizing offers since customer specified small sizes on all items. Polite and clear, but could explore meal deals or other beverage/food pairings to increase ticket.", "22": "Soft-serve cup treated as small sundae for topping opportunities and potential 2-for-$5 upsell. Pretzel-stick suggestion counted as an upsell offer despite not matching predefined scenarios."}
==================================================
Parsed JSON: {'1': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', '2': 3, '3': 1, '4': 'Small Vanilla Soft Serve Cup', '5': 1, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 3, '15': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', '16': 3, '17': 0, '18': 0, '19': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', '20': 3, '21': 'Operator greeted and took order efficiently. Provided one cross-sell offer for pretzel sticks and three additional-topping offers (extra Reese’s, extra Oreo, sprinkles). No upsizing offers since customer specified small sizes on all items. Polite and clear, but could explore meal deals or other beverage/food pairings to increase ticket.', '22': 'Soft-serve cup treated as small sundae for topping opportunities and potential 2-for-$5 upsell. Pretzel-stick suggestion counted as an upsell offer despite not matching predefined scenarios.'}
GPT Price: $33.630000 (input: 4887 tokens, output: 2982 tokens)
2025-08-24 03:38:32,728 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:52,462 - INFO - HTTP Request: POST https://api.openai.com/v1/responses "HTTP/1.1 200 OK"
2025-08-24 03:38:52,782 - INFO - Grading completed and uploaded to S3
2025-08-24 03:38:52,782 - INFO - Upserting grades for 15 transactions
2025-08-24 03:38:52,786 - INFO - Saved 15 grade records to exports/20250824_033852_grades.csv
2025-08-24 03:38:53,322 - INFO - HTTP Request: POST https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/grades?on_conflict=transaction_id&columns=%22score%22%2C%22num_upsell_offers%22%2C%22num_addon_opportunities%22%2C%22num_upsize_offers%22%2C%22out_of_stock_items%22%2C%22items_upsellable%22%2C%22num_upsell_opportunities%22%2C%22num_items_initial%22%2C%22num_addon_success%22%2C%22mobile_order%22%2C%22items_upsize_success%22%2C%22upsize_possible%22%2C%22upsell_possible%22%2C%22items_after%22%2C%22upsize_offered%22%2C%22num_upsell_success%22%2C%22coupon_used%22%2C%22upsell_offered%22%2C%22num_addon_offers%22%2C%22reasoning_summary%22%2C%22items_addonable%22%2C%22items_initial%22%2C%22num_upsize_success%22%2C%22num_upsize_opportunities%22%2C%22video_file_path%22%2C%22num_items_after%22%2C%22issues%22%2C%22complete_order%22%2C%22num_largest_offers%22%2C%22items_upsizeable%22%2C%22gpt_price%22%2C%22details%22%2C%22video_link%22%2C%22items_upsold%22%2C%22items_addon_success%22%2C%22feedback%22%2C%22transaction_id%22%2C%22transcript%22%2C%22asked_more_time%22 "HTTP/2 201 Created"
2025-08-24 03:38:53,324 - INFO - Successfully completed all processing steps for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,424 - INFO - Cleaned up temporary files for video c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,521 - INFO - HTTP Request: PATCH https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?id=eq.c3ad8372-41bf-430d-9206-bc2df059f917 "HTTP/2 200 OK"
2025-08-24 03:38:54,522 - INFO - ✅ Successfully processed video c3ad8372-41bf-430d-9206-bc2df059f917 in 1258.43 seconds
2025-08-24 03:38:54,906 - INFO - HTTP Request: GET https://ohuumgemptxrqrdavslz.supabase.co/rest/v1/videos?select=id%2C%20s3_key%2C%20run_id%2C%20location_id%2C%20started_at%2C%20ended_at&status=eq.uploaded&limit=1 "HTTP/2 200 OK"
2025-08-24 03:38:54,907 - INFO - No more uploaded videos found in queue.
2025-08-24 03:38:54,907 - INFO - Batch complete. Succeeded: 1, Failed: 0, Total: 1
2025-08-24 03:38:54,908 - INFO - Processed video IDs: c3ad8372-41bf-430d-9206-bc2df059f917
2025-08-24 03:38:54,908 - INFO - === Batch session completed in 1259.33 seconds ===
==================================================
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', 'num_items_initial': 3, 'num_upsell_opportunities': 1, 'items_upsellable': 'Small Vanilla Soft Serve Cup', 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': 0, 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 3, 'items_addonable': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', 'num_addon_offers': 3, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': 'Small Caramel Craze Blizzard, Small Oreo Blizzard, Small Vanilla Soft Serve Cup', 'num_items_after': 3, 'feedback': 'Operator greeted and took order efficiently. Provided one cross-sell offer for pretzel sticks and three additional-topping offers (extra Reese’s, extra Oreo, sprinkles). No upsizing offers since customer specified small sizes on all items. Polite and clear, but could explore meal deals or other beverage/food pairings to increase ticket.', 'issues': 'Soft-serve cup treated as small sundae for topping opportunities and potential 2-for-$5 upsell. Pretzel-stick suggestion counted as an upsell offer despite not matching predefined scenarios.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Hi, welcome to Duke.
Operator: What do you have? Nothing. If you have any questions on the menu.
Customer: I'll take a peanut buster parfait please.
Operator: Peanut buster, did you want whi...
Raw LLM response: {"1": "Peanut Buster Parfait", "2": 1, "3": 0, "4": 0, "5": 1, "6": 0, "7": 0, "8": 0, "9": 0, "10": 0, "11": 0, "12": 0, "13": 0, "14": 1, "15": "Peanut Buster Parfait", "16": 1, "17": 0, "18": 0, "19": "Peanut Buster Parfait", "20": 1, "21": "Operator greeted customer and took order accurately, offered whipped cream and sprinkles as an add on and attempted to cross sell pretzel sticks, but did not attempt any size upsell. Continue suggesting relevant add ons and remember to offer size upgrades when applicable.", "22": "Peanut Buster Parfait not in menu list so assumed single size; counted pretzel sticks suggestion as upselling offer despite no explicit upsell scenario; additional topping scenarios list empty so assumptions were required."}
==================================================
Parsed JSON: {'1': 'Peanut Buster Parfait', '2': 1, '3': 0, '4': 0, '5': 1, '6': 0, '7': 0, '8': 0, '9': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 1, '15': 'Peanut Buster Parfait', '16': 1, '17': 0, '18': 0, '19': 'Peanut Buster Parfait', '20': 1, '21': 'Operator greeted customer and took order accurately, offered whipped cream and sprinkles as an add on and attempted to cross sell pretzel sticks, but did not attempt any size upsell. Continue suggesting relevant add ons and remember to offer size upgrades when applicable.', '22': 'Peanut Buster Parfait not in menu list so assumed single size; counted pretzel sticks suggestion as upselling offer despite no explicit upsell scenario; additional topping scenarios list empty so assumptions were required.'}
GPT Price: $26.394000 (input: 4809 tokens, output: 2097 tokens)
==================================================
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Peanut Buster Parfait', 'num_items_initial': 1, 'num_upsell_opportunities': 0, 'items_upsellable': 0, 'num_upsell_offers': 1, 'items_upsold': 0, 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': 0, 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': 0, 'num_addon_opportunities': 1, 'items_addonable': 'Peanut Buster Parfait', 'num_addon_offers': 1, 'num_addon_success': 0, 'items_addon_success': 0, 'items_after': 'Peanut Buster Parfait', 'num_items_after': 1, 'feedback': 'Operator greeted customer and took order accurately, offered whipped cream and sprinkles as an add on and attempted to cross sell pretzel sticks, but did not attempt any size upsell. Continue suggesting relevant add ons and remember to offer size upgrades when applicable.', 'issues': 'Peanut Buster Parfait not in menu list so assumed single size; counted pretzel sticks suggestion as upselling offer despite no explicit upsell scenario; additional topping scenarios list empty so assumptions were required.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================

=== STEP 2 (Grading) RAW OUTPUT ===
Input transcript: Operator: Let me get a peanut butter parfait.
Customer: Peanut butter parfait for you?
Operator: Yeah.
Customer: Do you want some whipped cream and chopped nuts on that? That's the new phase.
Operator...
Raw LLM response: {"1": "Peanut Buster Parfait", "2": 1, "3": 0, "4": "0", "5": 0, "6": "0", "7": 0, "8": 0, "9": 0, "10": "0", "11": 0, "12": 0, "13": "0", "14": 1, "15": "Peanut Buster Parfait", "16": 1, "17": 0, "18": "0", "19": "Peanut Buster Parfait", "20": 1, "21": "Employee offered additional toppings which was appropriate and polite but did not attempt any upsell or upsize opportunities. Consider suggesting complementary items or promotions to increase ticket value.", "22": "Speaker labels appear reversed, treating lines marked Customer as employee. Peanut Buster Parfait not explicitly listed in provided menu so assumed single size with topping add-on opportunity."}
==================================================
Parsed JSON: {'1': 'Peanut Buster Parfait', '2': 1, '3': 0, '4': '0', '5': 0, '6': '0', '7': 0, '8': 0, '9': 0, '10': '0', '11': 0, '12': 0, '13': '0', '14': 1, '15': 'Peanut Buster Parfait', '16': 1, '17': 0, '18': '0', '19': 'Peanut Buster Parfait', '20': 1, '21': 'Employee offered additional toppings which was appropriate and polite but did not attempt any upsell or upsize opportunities. Consider suggesting complementary items or promotions to increase ticket value.', '22': 'Speaker labels appear reversed, treating lines marked Customer as employee. Peanut Buster Parfait not explicitly listed in provided menu so assumed single size with topping add-on opportunity.'}
GPT Price: $23.544000 (input: 4764 tokens, output: 1752 tokens)
==================================================
Mapped details: {'complete_order': 1, 'mobile_order': 0, 'coupon_used': 0, 'asked_more_time': 0, 'out_of_stock_items': '0', 'items_initial': 'Peanut Buster Parfait', 'num_items_initial': 1, 'num_upsell_opportunities': 0, 'items_upsellable': '0', 'num_upsell_offers': 0, 'items_upsold': '0', 'num_upsell_success': 0, 'num_largest_offers': 0, 'num_upsize_opportunities': 0, 'items_upsizeable': '0', 'num_upsize_offers': 0, 'num_upsize_success': 0, 'items_upsize_success': '0', 'num_addon_opportunities': 1, 'items_addonable': 'Peanut Buster Parfait', 'num_addon_offers': 1, 'num_addon_success': 0, 'items_addon_success': '0', 'items_after': 'Peanut Buster Parfait', 'num_items_after': 1, 'feedback': 'Employee offered additional toppings which was appropriate and polite but did not attempt any upsell or upsize opportunities. Consider suggesting complementary items or promotions to increase ticket value.', 'issues': 'Speaker labels appear reversed, treating lines marked Customer as employee. Peanut Buster Parfait not explicitly listed in provided menu so assumed single size with topping add-on opportunity.', 'reasoning_summary': '', 'gpt_price': 0, 'video_file_path': '', 'video_link': ''}
==================================================
